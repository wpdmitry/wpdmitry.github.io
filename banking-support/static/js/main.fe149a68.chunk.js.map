{"version":3,"sources":["services/api-service/data.ts","services/api-service/api-service.ts","services/api-service/index.ts","services/chat-service/index.ts","components/image/index.ts","services/operations-service/index.ts","services/accounts-service/index.ts","services/deposits-service/index.ts","components/image/image.tsx","services/chat-service/chat-service.ts","services/operations-service/operations-service.ts","services/accounts-service/accounts-service.ts","services/deposits-service/deposits-service.tsx","components/nav-link/nav-link.module.scss","components/tabs/tabs.module.scss","blocks/chat/components/chat-layout/chat-layout.module.scss","components/button/button.module.scss","blocks/chat/components/chat-stickers/chat-stickers.module.scss","blocks/chat/components/chat-input/chat-text-input.module.scss","blocks/chat/components/chat-input/chat-input.module.scss","blocks/chat/components/chat-messages/chat-messages.module.scss","blocks/chat/components/chat-text-message/chat-text-message.module.scss","components/loader/loader.module.scss","components/operation-item/operation-logo.module.scss","components/operation-item/operation-name.module.scss","components/operation-item/operation-item.module.scss","blocks/chat/components/chat-operation-message/chat-operation-message.module.scss","blocks/chat/components/chat-sticker-message/chat-sticker-message.module.scss","blocks/chat/components/chat-message/chat-message.module.scss","components/list/list.module.scss","components/deposit-item/deposit-item.module.scss","components/account-layout/account-layout.module.scss","components/account-item/account-item.module.scss","app.module.scss","components/nav-link/nav-link.tsx","components/tabs/tabs.tsx","modules/messages/constants.ts","modules/messages/actions.ts","blocks/chat/components/chat-layout/chat-layout.tsx","components/icons/disclosure-icon.tsx","components/icons/cross-icon.tsx","components/icons/chat-icon.tsx","components/icons/chat-send-icon.tsx","components/icons/chat-text-icon.tsx","components/icons/chat-stickers-icon.tsx","components/icons/money-bag-icon.tsx","components/icons/bank-building-icon.tsx","tools/classnames.ts","components/button/button.tsx","components/logos/index.tsx","components/popup/popup.tsx","blocks/chat/use-stickers.ts","blocks/chat/components/chat-stickers/chat-stickers.tsx","blocks/chat/components/chat-input/chat-text-input.tsx","blocks/chat/components/chat-input/chat-input.tsx","blocks/chat/components/chat-messages/chat-messages.tsx","blocks/chat/components/chat-text-message/chat-text-message.tsx","tools/get-money.ts","components/loader/loader.tsx","modules/operations/selectors.ts","modules/operations/constants.ts","modules/operations/actions.ts","hooks/use-operation.ts","tools/format-date.ts","components/operation-item/operation-logo.tsx","components/operation-item/operation-name.tsx","components/operation-item/operation-item.tsx","blocks/chat/components/chat-operation-message/chat-operation-message.tsx","blocks/chat/components/chat-sticker-message/chat-sticker-message.tsx","blocks/chat/components/chat-message/chat-message.tsx","modules/messages/selectors.ts","blocks/chat/use-chat-messages.ts","blocks/chat/chat-container.tsx","components/list/list.tsx","components/link/link.tsx","components/deposit-item/deposit-item.tsx","modules/deposits/selectors.ts","modules/deposits/constants.ts","modules/deposits/actions.ts","blocks/deposits/use-deposits.ts","blocks/deposits/deposits-container.tsx","hooks/use-router.ts","hooks/use-url-params.ts","components/account-layout/account-layout.tsx","hooks/use-account-operations.ts","blocks/deposit/use-deposit.ts","blocks/deposit/deposit-container.tsx","components/account-item/account-item.tsx","modules/accounts/selectors.ts","modules/accounts/constants.ts","modules/accounts/actions.ts","blocks/account/use-account.ts","blocks/account/account-container.tsx","blocks/accounts/use-accounts.ts","blocks/accounts/accounts-container.tsx","modules/operations/reducer.ts","modules/accounts/reducer.ts","modules/deposits/reducer.ts","modules/messages/reducer.ts","modules/root-reducer.ts","modules/operations/sagas.ts","modules/accounts/sagas.ts","modules/deposits/sagas.ts","services/chat-service/client-bot.ts","modules/messages/sagas.ts","modules/root-saga.ts","modules/create-store.ts","app.tsx","index.tsx"],"names":["accounts","id","logoId","currency","name","interestRate","openedAt","totalSum","deposits","closeAt","operations","sum","type","accountId","createdAt","merchant","user","users","stickers","messagesStore","createStore","messages","action","message","ApiService","filter","op","reverse","operationId","operation","find","Error","map","account","accountOperations","lastOperation","length","deposit","depositOperations","depositId","userId","text","stickerId","newMessage","Math","floor","random","Date","toISOString","state","dispatch","getState","own","callback","subscribe","lastMessage","getCorrectSrc","src","process","Image","alt","rest","ChatService","apiService","this","sendMessage","getMessages","getStickers","syncMessages","createService","OperationsService","getAccountOperations","getOperation","AccountsService","getAccounts","getAccount","DepositsService","getDeposits","getDeposit","module","exports","b","bcm","styles","NavLink","to","className","Tabs","initialPath","tabs","title","path","key","activeClassName","active","component","GET_MESSAGES","GOT_MESSAGES","GOT_MESSAGES_ERROR","SEND_TEXT_MESSAGE","SEND_OPERATION_MESSAGE","SEND_STICKER_MESSAGE","START_WATCH_MESSAGES","STOP_WATCH_MESSAGES","sendOperationMessage","gotMessages","ChatLayout","input","messagesCount","messagesRef","useRef","lastScrollHeight","useEffect","current","scrollHeight","scrollTop","clientHeight","isBottom","setTimeout","scrollTo","ref","DisclosureIcon","props","width","height","viewBox","fill","fillRule","opacity","cx","cy","r","stroke","strokeLinecap","strokeWidth","d","CrossIcon","xmlns","strokeLinejoin","ChatIcon","ChatSendIcon","ChatTextIcon","ChatStickersIcon","MoneyBagIcon","x","y","xmlSpace","BankBuildingIcon","args","arg","join","Button","React","forwardRef","cn","MerchantLogo","merchantId","AccountLogo","UserLogo","StickerLogo","popupContentStyle","zIndex","boxShadow","padding","border","borderRadius","Popup","trigger","position","children","contentStyle","useStickers","useState","setStickers","then","ChatStickers","onSelect","close","sticker","onClick","ChatTextInput","onSend","focused","setFocused","setText","div","changeText","useCallback","innerText","ele","range","document","createRange","sel","window","getSelection","setStart","split","collapse","removeAllRanges","addRange","e","setCursorToEnd","handleSendText","handleSubmit","preventDefault","handleInput","handleFocus","handleBlur","handleKeyDown","keyCode","metaKey","showPlaceholder","trim","onSubmit","contentEditable","onInput","onFocus","onBlur","onKeyDown","visible","ChatInput","onSendTextMessage","onSendStickerMessage","ChatMessages","messageRenderer","ChatTextMessage","theme","moneyMap","RUB","USD","sign","abs","Loader","size","style","getById","byId","getLoadedById","loadedById","getLoadedByAccountId","loadedByAccountId","operationSelector","createSelector","operationLoadedSelector","operationLoaded","loaded","operationErrorSelector","error","accountOperationsSelector","operationIdsByAccountId","getOperationIdsByAccountId","operationIds","accountOperationsLoadedSelector","accountOperationsLoaded","accountOperationsErrorSelector","GET_ACCOUNT_OPERATIONS","GOT_ACCOUNT_OPERATIONS","GOT_ACCOUNT_OPERATIONS_ERROR","GET_OPERATION","GOT_OPERATION","GOT_OPERATION_ERROR","gotAccountOperations","gotAccountOperationsError","gotOperation","gotOperationError","useOperation","useDispatch","useSelector","dateString","pattern","format","locale","ru","OperationLogo","OperationName","OperationItem","onMessage","handleMessage","formatDate","getMoney","ChatOperationMessage","ChatStickerMessage","ChatMessage","messagesSelector","ids","messagesLoadedSelector","messagesErrorSelector","useChatMessages","ChatContainer","handleSendTextMessage","sendTextMessage","handleSendStickerMessage","sendStickerMessage","List","data","itemRenderer","rowData","rowIndex","Link","DepositItem","number","getDepositLoadedById","depositsSelector","depositsLoadedSelector","depositsErrorSelector","depositSelector","depositLoadedSelector","depositLoaded","depositErrorSelector","GET_DEPOSITS","GOT_DEPOSITS","GOT_DEPOSITS_ERROR","GET_DEPOSIT","GOT_DEPOSIT","GOT_DEPOSIT_ERROR","gotDeposits","gotDeposit","gotDepositError","useDeposits","DepositsContainer","useAccounts","marginTop","useRouter","useContext","__RouterContext","useUrlParams","match","params","AccountLayout","info","fallback","returnUrl","useAccountOperations","useDeposit","DepositContainer","loadedAccount","loadedOperations","handleSendOperation","AccountItem","getAccountLoadedById","accountsSelector","accountsLoadedSelector","accountsErrorSelector","accountSelector","accountLoadedSelector","accountLoaded","accountErrorSelector","GET_ACCOUNTS","GOT_ACCOUNTS","GOT_ACCOUNTS_ERROR","GET_ACCOUNT","GOT_ACCOUNT","GOT_ACCOUNT_ERROR","gotAccounts","gotAccount","gotAccountError","useAccount","AccountContainer","AccountsContainer","initialState","combineReducers","forEach","acc","depos","msg","geOperation","operationsService","put","actions","all","takeEvery","accountsService","depositsService","getRandomInt","from","ClientBot","states","currentStateId","desc","run","a","runState","waitMessage","timeout","Promise","resolve","spam","timerId","unsubscribe","subscribeToMessages","clearInterval","setInterval","stateId","changeCurrentState","runCurrentState","messagesWatcher","startWatchMessages","rehydrateMessages","messagesService","delay","fork","watcher","take","cancel","select","clientBot","startDialog","startEcho","call","accountsSaga","depositsSaga","messagesSaga","operationsSaga","persistConfig","storage","whitelist","persistedReducer","persistReducer","rootReducer","sagaMiddleware","createSagaMiddleware","store","applyMiddleware","persistor","persistStore","rootSaga","configureStore","App","loading","Deposit","Account","Accounts","Deposits","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.fe149a68.chunk.js","sourcesContent":["export const accounts = [\n  {\n    id: \"3502354\",\n    logoId: \"1\",\n    currency: { name: \"RUB\" },\n    interestRate: 4,\n    openedAt: \"2019-10-13T18:31:42Z\",\n    totalSum: 2495\n  },\n  {\n    id: \"3502355\",\n    logoId: \"2\",\n    currency: { name: \"RUB\" },\n    interestRate: 5,\n    openedAt: \"2019-10-13T19:31:42Z\",\n    totalSum: 100\n  },\n  {\n    id: \"3502356\",\n    logoId: \"1\",\n    currency: { name: \"RUB\" },\n    interestRate: 8,\n    openedAt: \"2019-10-13T13:31:42Z\",\n    totalSum: -1200\n  }\n];\nexport const deposits = [\n  {\n    id: \"2352332\",\n    logoId: \"1\",\n    currency: { name: \"RUB\" },\n    interestRate: 7,\n    totalSum: 8600,\n    openedAt: \"2019-10-13T18:31:42Z\",\n    closeAt: \"2020-10-13T18:31:42Z\"\n  },\n  {\n    id: \"2352333\",\n    logoId: \"2\",\n    currency: { name: \"USD\" },\n    interestRate: 2,\n    totalSum: 3000,\n    openedAt: \"2019-10-13T18:31:42Z\",\n    closeAt: \"2022-10-13T18:31:42Z\"\n  }\n];\nexport const operations = [\n  {\n    id: \"112412\",\n    sum: -370,\n    type: \"1\",\n    currency: { name: \"RUB\" },\n    accountId: \"3502354\",\n    createdAt: \"2019-10-12T17:31:42Z\",\n    merchant: { id: \"1\", name: \"Макдональдс\" }\n  },\n  {\n    id: \"112813\",\n    sum: -500,\n    type: \"1\",\n    currency: { name: \"RUB\" },\n    accountId: \"3502355\",\n    createdAt: \"2019-10-14T18:31:42Z\",\n    merchant: { id: \"1\", name: \"Макдональдс\" }\n  },\n  {\n    id: \"113813\",\n    sum: -2512,\n    type: \"1\",\n    currency: { name: \"RUB\" },\n    accountId: \"3502354\",\n    createdAt: \"2019-10-13T15:31:42Z\",\n    merchant: { id: \"2\", name: \"Дикси\" }\n  },\n  {\n    id: \"113819\",\n    sum: -373,\n    type: \"4\",\n    currency: { name: \"RUB\" },\n    accountId: \"3502354\",\n    createdAt: \"2019-10-13T18:31:42Z\",\n    user: { id: \"1\", name: \"Антону\" }\n  },\n  {\n    id: \"114819\",\n    sum: 6000,\n    type: \"5\",\n    currency: { name: \"RUB\" },\n    accountId: \"3502354\",\n    createdAt: \"2019-10-14T18:31:42Z\"\n  },\n  {\n    id: \"124819\",\n    sum: 600,\n    type: \"3\",\n    currency: { name: \"RUB\" },\n    accountId: \"3502355\",\n    createdAt: \"2019-10-15T12:31:42Z\"\n  },\n  {\n    id: \"124820\",\n    sum: -250,\n    type: \"1\",\n    currency: { name: \"RUB\" },\n    accountId: \"3502354\",\n    createdAt: \"2019-10-15T18:22:42Z\",\n    merchant: { id: \"1\", name: \"Макдональдс\" }\n  },\n  {\n    id: \"125819\",\n    sum: -1200,\n    type: \"1\",\n    currency: { name: \"RUB\" },\n    accountId: \"3502356\",\n    createdAt: \"2019-10-13T13:01:42Z\",\n    merchant: { id: \"2\", name: \"Дикси\" }\n  },\n  {\n    id: \"133820\",\n    sum: 2000,\n    type: \"5\",\n    currency: { name: \"RUB\" },\n    accountId: \"2352332\",\n    createdAt: \"2019-10-12T18:31:42Z\"\n  },\n  {\n    id: \"133822\",\n    sum: 2000,\n    type: \"5\",\n    currency: { name: \"USD\" },\n    accountId: \"2352333\",\n    createdAt: \"2019-10-12T18:31:42Z\"\n  },\n  {\n    id: \"133823\",\n    sum: 3000,\n    type: \"5\",\n    currency: { name: \"USD\" },\n    accountId: \"2352332\",\n    createdAt: \"2019-10-13T12:31:42Z\"\n  },\n  {\n    id: \"133824\",\n    sum: 900,\n    type: \"5\",\n    currency: { name: \"USD\" },\n    accountId: \"2352333\",\n    createdAt: \"2019-10-13T12:31:42Z\"\n  },\n  {\n    id: \"133825\",\n    sum: 100,\n    type: \"3\",\n    currency: { name: \"USD\" },\n    accountId: \"2352333\",\n    createdAt: \"2019-10-13T12:31:42Z\"\n  },\n  {\n    id: \"133826\",\n    sum: 600,\n    type: \"3\",\n    currency: { name: \"RUB\" },\n    accountId: \"2352332\",\n    createdAt: \"2019-10-13T12:31:42Z\"\n  },\n  {\n    id: \"163826\",\n    sum: 1000,\n    type: \"5\",\n    currency: { name: \"USD\" },\n    accountId: \"2352332\",\n    createdAt: \"2019-10-13T12:31:42Z\"\n  },\n];\nexport const users = {\n  \"0\": { id: \"0\", name: \"Поддержка\" },\n  \"1\": { id: \"1\", name: \"Иван\" }\n};\nexport const supportUserId = \"0\";\nexport const stickers = [\n  { id: \"1\" },\n  { id: \"2\" },\n  { id: \"3\" },\n  { id: \"4\" },\n  { id: \"5\" },\n  { id: \"6\" },\n  { id: \"7\" },\n  { id: \"8\" },\n  { id: \"9\" },\n  { id: \"10\" },\n  { id: \"11\" },\n  { id: \"12\" },\n  { id: \"13\" },\n  { id: \"14\" },\n  { id: \"15\" },\n  { id: \"16\" },\n  { id: \"17\" },\n  { id: \"18\" },\n  { id: \"19\" },\n  { id: \"20\" },\n  { id: \"21\" },\n  { id: \"22\" },\n  { id: \"23\" },\n  { id: \"24\" }\n];","import { createStore } from \"redux\";\n\nimport {\n  accounts,\n  operations,\n  stickers,\n  deposits,\n  supportUserId,\n  users\n} from \"./data\";\n\nconst getId = () => `${Math.floor(Math.random() * 1e8)}`;\n\nconst SET_MESSAGES = \"SET_MESSAGES\";\nconst NEW_MESSAGE = \"NEW_MESSAGE\";\nconst messagesStore = createStore((messages: any[] = [], action: any) => {\n  switch (action.type) {\n    case SET_MESSAGES: {\n      const { messages } = action;\n      return messages;\n    }\n\n    case NEW_MESSAGE: {\n      const { message } = action;\n      return [...messages, message];\n    }\n\n    default: {\n      return messages;\n    }\n  }\n}, []);\n\nclass ApiService {\n  async getAccountOperations<T>(accountId: string): Promise<T> {\n    // @ts-ignore\n    return operations.filter(op => op.accountId === accountId).reverse();\n  }\n\n  async getOperation<T>(operationId: string): Promise<T> {\n    const operation = operations.find(op => op.id === operationId);\n\n    if (!operation) {\n      throw new Error(\"Not found operation\");\n    }\n\n    // @ts-ignore\n    return operation;\n  }\n\n  async getAccounts<T>(): Promise<T> {\n    // @ts-ignore\n    return accounts.map(account => {\n      const accountOperations = operations.filter(\n        operation => operation.accountId === account.id\n      );\n      return {\n        ...account,\n        lastOperation: accountOperations[accountOperations.length - 1]\n      };\n    });\n  }\n\n  async getDeposits<T>(): Promise<T> {\n    // @ts-ignore\n    return deposits.map(deposit => {\n      const depositOperations = operations.filter(\n        operation => operation.accountId === deposit.id\n      );\n      return {\n        ...deposit,\n        lastOperation: depositOperations[depositOperations.length - 1]\n      };\n    });\n  }\n\n  async getAccount<T>(accountId: string): Promise<T> {\n    // @ts-ignore\n    const account = accounts.find(account => account.id === accountId);\n\n    if (!account) {\n      throw new Error(\"Not found account\");\n    }\n\n    // @ts-ignore\n    return account;\n  }\n\n  async getDeposit<T>(depositId: string): Promise<T> {\n    // @ts-ignore\n    const deposit = deposits.find(deposit => deposit.id === depositId);\n\n    if (!deposit) {\n      throw new Error(\"Not found deposit\");\n    }\n\n    // @ts-ignore\n    return deposit;\n  }\n\n  async sendMessage<T>({\n    userId = supportUserId,\n    text,\n    stickerId,\n    operationId\n  }: {\n    text?: string;\n    stickerId?: string;\n    operationId?: string;\n    userId?: string;\n  }): Promise<T> {\n    // @ts-ignore\n    const user = users[userId];\n\n    const newMessage = {\n      id: getId(),\n      createdAt: new Date().toISOString(),\n      state: \"2\",\n      user\n    };\n\n    if (text) {\n      // @ts-ignore\n      newMessage.type = \"1\";\n      // @ts-ignore\n      newMessage.text = text;\n    } else if (operationId) {\n      // @ts-ignore\n      newMessage.type = \"2\";\n      // @ts-ignore\n      newMessage.operationId = operationId;\n    } else if (stickerId) {\n      // @ts-ignore\n      newMessage.type = \"3\";\n      // @ts-ignore\n      newMessage.stickerId = stickerId;\n    }\n\n    messagesStore.dispatch({ type: NEW_MESSAGE, message: newMessage });\n    // @ts-ignore\n    return newMessage;\n  }\n\n  async getStickers<T>(): Promise<T> {\n    // @ts-ignore\n    return stickers;\n  }\n\n  async getMessages<T>(userId: string = supportUserId): Promise<T> {\n    // @ts-ignore\n    return messagesStore.getState().map(message => ({\n      ...message,\n      own: message.user.id === userId\n    }));\n  }\n\n  subscribeToMessages<T>(\n    callback: (msg: T) => void,\n    userId: string = supportUserId\n  ) {\n    return messagesStore.subscribe(() => {\n      const messages = messagesStore.getState();\n      const lastMessage = messages[messages.length - 1];\n\n      if (lastMessage && lastMessage.user.id !== userId) {\n        callback({ ...lastMessage, own: false });\n      }\n    });\n  }\n\n  async syncMessages<T>(messages: any[]): Promise<T> {\n    messagesStore.dispatch({ type: SET_MESSAGES, messages });\n    // @ts-ignore\n    return true;\n  }\n\n  static createService() {\n    return new ApiService();\n  }\n}\n\nexport default ApiService;\n","export { default } from \"./api-service\";\n","export { default } from \"./chat-service\";\nexport * from \"./models\";\n","export { default } from \"./image\";\nexport * from \"./models\";\n","export { default } from \"./operations-service\";\nexport * from \"./models\";\n","export { default } from \"./accounts-service\";\nexport * from \"./models\";\n","export { default } from \"./deposits-service\";\nexport * from \"./models\";\n","import React from \"react\";\n\nimport { ImageProps } from \"./models\";\n\nfunction getCorrectSrc(src: string | undefined) {\n  if (!src) return undefined;\n\n  return src[0] === \"/\" && src[1] !== \"/\"\n    ? `${process.env.PUBLIC_URL}${src}`\n    : src;\n}\n\nfunction Image({ src, alt, ...rest }: ImageProps) {\n  return <img src={getCorrectSrc(src)} alt={alt} {...rest} />;\n}\n\nexport default Image;\n","import ApiService from \"../api-service\";\n\nimport {\n  Message,\n  TextMessage,\n  OperationMessage,\n  StickerMessage,\n  Sticker\n} from \"./models\";\n\nclass ChatService {\n  constructor(private apiService: ApiService) {}\n\n  async sendTextMessage(text: string): Promise<TextMessage> {\n    return await this.apiService.sendMessage<TextMessage>({ text });\n  }\n\n  async sendOperationMessage(operationId: string): Promise<OperationMessage> {\n    return await this.apiService.sendMessage<OperationMessage>({ operationId });\n  }\n\n  async sendStickerMessage(stickerId: string): Promise<StickerMessage> {\n    return await this.apiService.sendMessage<StickerMessage>({ stickerId });\n  }\n\n  async getMessages(): Promise<Message[]> {\n    return await this.apiService.getMessages<Message[]>();\n  }\n\n  async getStickers(): Promise<Sticker[]> {\n    return await this.apiService.getStickers<Sticker[]>();\n  }\n\n  async syncMessages(messages: Message[]): Promise<boolean> {\n    return await this.apiService.syncMessages<boolean>(messages);\n  }\n\n  static createService() {\n    return new ChatService(ApiService.createService());\n  }\n}\n\nexport default ChatService;\n","import ApiService from \"../api-service\";\n\nimport { Operation } from \"./models\";\n\nclass OperationsService {\n  constructor(private apiService: ApiService) {}\n\n  async getAccountOperations(accountId: string) {\n    return await this.apiService.getAccountOperations<Operation[]>(accountId);\n  }\n\n  async getOperation(operationId: string) {\n    return await this.apiService.getOperation<Operation>(operationId);\n  }\n\n  static createService() {\n    return new OperationsService(ApiService.createService());\n  }\n}\n\nexport default OperationsService;\n","import ApiService from \"../api-service\";\n\nimport { Account } from \"./models\";\n\nclass AccountsService {\n  constructor(private apiService: ApiService) {}\n\n  async getAccounts(): Promise<Account[]> {\n    return await this.apiService.getAccounts<Account[]>();\n  }\n\n  async getAccount(accountId: string): Promise<Account> {\n    return await this.apiService.getAccount<Account>(accountId);\n  }\n\n  static createService() {\n    return new AccountsService(ApiService.createService());\n  }\n}\n\nexport default AccountsService;\n","import ApiService from \"../api-service\";\n\nimport { Deposit } from \"./models\";\n\nclass DepositsService {\n  constructor(private apiService: ApiService) {}\n\n  async getDeposits(): Promise<Deposit[]> {\n    return await this.apiService.getDeposits<Deposit[]>();\n  }\n\n  async getDeposit(depositId: string): Promise<Deposit> {\n    return await this.apiService.getDeposit<Deposit>(depositId);\n  }\n\n  static createService() {\n    return new DepositsService(ApiService.createService());\n  }\n}\n\nexport default DepositsService;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav-link\":\"nav-link_nav-link__12EZC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"tabs_tabs__1Mpj_\",\"tabs__nav-links\":\"tabs_tabs__nav-links__26tVb\",\"tabs__nav-link-container\":\"tabs_tabs__nav-link-container__yGJG-\",\"tabs__nav-link\":\"tabs_tabs__nav-link__3TN9-\",\"tabs__nav-link_active\":\"tabs_tabs__nav-link_active__1scIE\",\"tabs__content\":\"tabs_tabs__content__1YXpJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-layout\":\"chat-layout_chat-layout__249-3\",\"chat-layout__messages\":\"chat-layout_chat-layout__messages__1xjQj\",\"chat-layout__input\":\"chat-layout_chat-layout__input__2GiTo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"button_button__H5057\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-stickers\":\"chat-stickers_chat-stickers__yDpPa\",\"chat-stickers__items\":\"chat-stickers_chat-stickers__items__2HA0x\",\"chat-stickers__item\":\"chat-stickers_chat-stickers__item__1p4Jg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-text-input\":\"chat-text-input_chat-text-input__2RkWs\",\"chat-text-input__wrapper\":\"chat-text-input_chat-text-input__wrapper__3NN5A\",\"chat-text-input__field\":\"chat-text-input_chat-text-input__field__2KT4G\",\"chat-text-input__placeholder\":\"chat-text-input_chat-text-input__placeholder__3UN1M\",\"chat-text-input__placeholder_visible\":\"chat-text-input_chat-text-input__placeholder_visible__4FzeU\",\"chat-text-input__send-button\":\"chat-text-input_chat-text-input__send-button__2E6HQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-input\":\"chat-input_chat-input__1IZkL\",\"chat-input__action\":\"chat-input_chat-input__action__3CkfZ\",\"chat-input__form\":\"chat-input_chat-input__form__3Koae\",\"chat-input__text-field\":\"chat-input_chat-input__text-field__2JHKz\",\"chat-input__send-button\":\"chat-input_chat-input__send-button__3yfIL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-messages\":\"chat-messages_chat-messages__2Q6gP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-text-message\":\"chat-text-message_chat-text-message__1TsK4\",\"chat-text-message_theme_dark\":\"chat-text-message_chat-text-message_theme_dark__2Vi7o\",\"chat-text-message_theme_light\":\"chat-text-message_chat-text-message_theme_light__yegjL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"loader_loader__2d6FG\",\"loader__content\":\"loader_loader__content__8mOs-\",\"spinner\":\"loader_spinner__3ExDN\",\"loader__content_size_xs\":\"loader_loader__content_size_xs__34K7h\",\"loader__content_size_xsmax\":\"loader_loader__content_size_xsmax__1pkFT\",\"loader__content_size_s\":\"loader_loader__content_size_s__q-kkA\",\"loader__content_size_m\":\"loader_loader__content_size_m__1goz4\",\"loader__content_size_l\":\"loader_loader__content_size_l__1FqUq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"operation-logo\":\"operation-logo_operation-logo__3Nnw5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"operation-name\":\"operation-name_operation-name__wSvBe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"operation-item\":\"operation-item_operation-item__3Vd2N\",\"operation-item__bg\":\"operation-item_operation-item__bg__2MPNz\",\"operation-item__message-button\":\"operation-item_operation-item__message-button__3uZ_-\",\"operation-item__wrapper\":\"operation-item_operation-item__wrapper__3IB_5\",\"operation-item__left\":\"operation-item_operation-item__left__1RGup\",\"operation-item__right\":\"operation-item_operation-item__right__2eu5K\",\"operation-item__logo\":\"operation-item_operation-item__logo__3oMoP\",\"operation-item__name\":\"operation-item_operation-item__name__1Gtf7\",\"operation-item__date\":\"operation-item_operation-item__date__tTOir\",\"operation-item__sum\":\"operation-item_operation-item__sum__3kRXH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-operation-message\":\"chat-operation-message_chat-operation-message__1PFys\",\"chat-operation-message_theme_dark\":\"chat-operation-message_chat-operation-message_theme_dark__32rLk\",\"chat-operation-message_theme_light\":\"chat-operation-message_chat-operation-message_theme_light__1_qpn\",\"chat-operation-message__logo\":\"chat-operation-message_chat-operation-message__logo__1kYxv\",\"chat-operation-message__name\":\"chat-operation-message_chat-operation-message__name__Fn4pU\",\"chat-operation-message__sum\":\"chat-operation-message_chat-operation-message__sum__1LJAf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-sticker-message\":\"chat-sticker-message_chat-sticker-message__3H-4E\",\"chat-sticker-message__logo\":\"chat-sticker-message_chat-sticker-message__logo__16BSE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-message\":\"chat-message_chat-message__6wazl\",\"chat-message_own\":\"chat-message_chat-message_own__x6kHq\",\"chat-message__name\":\"chat-message_chat-message__name__1dzsE\",\"chat-message__wrapper\":\"chat-message_chat-message__wrapper__2uR0i\",\"chat-message__logo\":\"chat-message_chat-message__logo__8we8R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"list_list__2ZXKC\",\"list__item\":\"list_list__item__3BkQz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"account-item\":\"deposit-item_account-item__1JvJd\",\"account-item__header\":\"deposit-item_account-item__header__1Gp86\",\"account-item__total-sum\":\"deposit-item_account-item__total-sum__6Yq3n\",\"account-item__logo\":\"deposit-item_account-item__logo__XE9kD\",\"account-item__info\":\"deposit-item_account-item__info__Sd3JK\",\"account-item__more-link\":\"deposit-item_account-item__more-link__1Fs8i\",\"account-item__last-sum\":\"deposit-item_account-item__last-sum__SOm0g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"account-layout\":\"account-layout_account-layout__3xcqm\",\"account-layout__fallback\":\"account-layout_account-layout__fallback__xJ8tX\",\"account-layout__info\":\"account-layout_account-layout__info__1oZIY\",\"account-layout__operations-container\":\"account-layout_account-layout__operations-container__l-4p4\",\"account-layout__operations-title\":\"account-layout_account-layout__operations-title__o8T0i\",\"account-layout__operations\":\"account-layout_account-layout__operations__1R8r1\",\"account-layout__close-link\":\"account-layout_account-layout__close-link__3NXce\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"account-item\":\"account-item_account-item__3rhEU\",\"account-item__header\":\"account-item_account-item__header__7MaVo\",\"account-item__total-sum\":\"account-item_account-item__total-sum__3wEcF\",\"account-item__logo\":\"account-item_account-item__logo__1yvQR\",\"account-item__info\":\"account-item_account-item__info__261nl\",\"account-item__more-link\":\"account-item_account-item__more-link__2L0AA\",\"account-item__last-sum\":\"account-item_account-item__last-sum__1P7Jn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__3mk8F\",\"app__chat\":\"app_app__chat__1jYfQ\",\"app__sidebar\":\"app_app__sidebar__-6xVV\"};","import React from \"react\";\nimport { NavLink as RouterNavLink, NavLinkProps } from \"react-router-dom\";\n\nimport bcm from \"../../tools/bcm\";\n\nimport styles from \"./nav-link.module.scss\";\n\nconst b = bcm(styles);\n\nfunction NavLink({ to, ...rest }: NavLinkProps) {\n  return (\n    <div className={b()}>\n      <RouterNavLink to={to} {...rest} />\n    </div>\n  );\n}\n\nexport default NavLink;\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\n\nimport bcm from \"../../tools/bcm\";\n\nimport NavLink from \"../nav-link\";\n\nimport styles from \"./tabs.module.scss\";\n\nconst b = bcm(styles);\n\ntype Tab = {\n  title: string;\n  path: string;\n  component: React.ComponentType;\n};\n\ntype TabsProps = {\n  initialPath: string;\n  tabs: Tab[];\n};\n\nfunction Tabs({ initialPath, tabs }: TabsProps) {\n  return (\n    <div className={b()}>\n      <div className={b(\"nav-links\")}>\n        {tabs.map(({ title, path }) => (\n          <div key={path} className={b(\"nav-link-container\")}>\n            <NavLink\n              className={b(\"nav-link\")}\n              activeClassName={b(\"nav-link\", { active: true })}\n              to={path}\n            >\n              {title}\n            </NavLink>\n          </div>\n        ))}\n      </div>\n      <div className={b(\"content\")}>\n        {tabs.map(({ path, component }) => (\n          <Route key={path} path={path} component={component} />\n        ))}\n        <Redirect to={initialPath} />\n      </div>\n    </div>\n  );\n}\n\nexport default Tabs;\n","export const GET_MESSAGES = \"GET_MESSAGES\";\nexport const GOT_MESSAGES = \"GOT_MESSAGES\";\nexport const GOT_MESSAGES_ERROR = \"GOT_MESSAGES_ERROR\";\n\nexport const SEND_TEXT_MESSAGE = \"SEND_TEXT_MESSAGE\";\nexport const SEND_OPERATION_MESSAGE = \"SEND_OPERATION_MESSAGE\";\nexport const SEND_STICKER_MESSAGE = \"SEND_STICKER_MESSAGE\";\n\n\nexport const START_WATCH_MESSAGES = \"START_WATCH_MESSAGES\";\nexport const STOP_WATCH_MESSAGES = \"STOP_WATCH_MESSAGES\";\n","import { Message } from \"../../services/chat-service\";\n\nimport {\n  START_WATCH_MESSAGES,\n  STOP_WATCH_MESSAGES,\n  SEND_TEXT_MESSAGE,\n  SEND_OPERATION_MESSAGE,\n  SEND_STICKER_MESSAGE,\n  GET_MESSAGES,\n  GOT_MESSAGES,\n  GOT_MESSAGES_ERROR\n} from \"./constants\";\n\nexport function sendTextMessage(text: string) {\n  return { type: SEND_TEXT_MESSAGE, text } as const;\n}\n\nexport function sendOperationMessage(operationId: string) {\n  return { type: SEND_OPERATION_MESSAGE, operationId } as const;\n}\n\nexport function sendStickerMessage(stickerId: string) {\n  return { type: SEND_STICKER_MESSAGE, stickerId } as const;\n}\n\nexport function getMessages() {\n  return { type: GET_MESSAGES } as const;\n}\n\nexport function gotMessages(messages: Message[]) {\n  return { type: GOT_MESSAGES, messages } as const;\n}\n\nexport function gotMessagesError(error: string) {\n  return { type: GOT_MESSAGES_ERROR, error } as const;\n}\n\nexport function startWatchMessages() {\n  return { type: START_WATCH_MESSAGES } as const;\n}\n\nexport function stopWatchMessages() {\n  return { type: STOP_WATCH_MESSAGES } as const;\n}\n","import React, { useRef, useEffect } from \"react\";\n\nimport bcm from \"../../../../tools/bcm\";\n\nimport styles from \"./chat-layout.module.scss\";\n\nconst b = bcm(styles);\n\ntype ChatProps = {\n  input: React.ReactElement;\n  messages: React.ReactElement;\n  messagesCount?: number;\n};\n\nfunction ChatLayout({ input, messages, messagesCount }: ChatProps) {\n  const messagesRef = useRef<HTMLDivElement>(null);\n  const lastScrollHeight = useRef<number>(0);\n\n  useEffect(() => {\n    if (messagesRef.current) {\n      const { scrollHeight, scrollTop, clientHeight } = messagesRef.current;\n      const isBottom = lastScrollHeight.current - scrollTop <= clientHeight;\n      lastScrollHeight.current = scrollHeight;\n\n      if (isBottom) {\n        setTimeout(() => {\n          if (messagesRef.current) {\n            const { scrollHeight } = messagesRef.current;\n            messagesRef.current.scrollTo(0, scrollHeight);\n          }\n        }, 100); // magic ;)\n      }\n    }\n  }, [messagesCount]);\n\n  return (\n    <div className={b()}>\n      <div ref={messagesRef} className={b(\"messages\")}>\n        {messages}\n      </div>\n      <div className={b(\"input\")}>{input}</div>\n    </div>\n  );\n}\n\nexport default ChatLayout;\n","import React from \"react\";\n\nimport { IconProps } from \"./models\";\n\nfunction DisclosureIcon(props: IconProps) {\n  return (\n    <svg width=\"35\" height=\"35\" viewBox=\"0 0 35 35\" {...props}>\n      <g fill=\"none\" fillRule=\"evenodd\" opacity=\".9\">\n        <circle cx=\"17.5\" cy=\"17.5\" r=\"17.5\" fill=\"#EEE\" />\n        <path\n          stroke=\"#333\"\n          strokeLinecap=\"round\"\n          strokeWidth=\"1.4\"\n          d=\"M18 12h5v5M18 22h-5v-5\"\n        />\n      </g>\n    </svg>\n  );\n}\n\nexport default DisclosureIcon;\n","import React from \"react\";\n\nimport { IconProps } from \"./models\";\n\nfunction CrossIcon(props: IconProps) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"21\"\n      height=\"21\"\n      viewBox=\"0 0 21 21\"\n      {...props}\n    >\n      <g\n        fill=\"none\"\n        fillRule=\"evenodd\"\n        stroke=\"#333\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.4\"\n      >\n        <path d=\"M15.738 5.838l-9.9 9.9M15.738 15.738l-9.9-9.9\" />\n      </g>\n    </svg>\n  );\n}\n\nexport default CrossIcon;\n","import React from \"react\";\n\nimport { IconProps } from \"./models\";\n\n\nfunction ChatIcon(props: IconProps) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      {...props}\n    >\n      <g\n        fill=\"none\"\n        fillRule=\"evenodd\"\n        stroke=\"#333\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.4\"\n      >\n        <path d=\"M21.459 5.632a2.99 2.99 0 0 0-2.731-1.999 66.047 66.047 0 0 0-13.513 0c-1.196.14-2.507.826-2.675 2a28.313 28.313 0 0 0 0 9.988c.168 1.175 1.482 1.86 2.675 1.998.896.091 1.438.15 2.334.204v-.002s3.006.493.536 3.885c5.508-1.338 7.39-3.83 7.39-3.83h-.023a65.655 65.655 0 0 0 3.276-.257 2.987 2.987 0 0 0 2.731-1.998 28.22 28.22 0 0 0 0-9.989zM7.857 9.367h8.285M7.857 12.715h8.285\" />\n      </g>\n    </svg>\n  );\n}\n\nexport default ChatIcon;\n","import React from \"react\";\n\nimport { IconProps } from \"./models\";\n\nfunction ChatSendIcon(props: IconProps) {\n  return (\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"#FFF\"\n        fillRule=\"evenodd\"\n        d=\"M19.975 13.235c1.365-.682 1.368-1.786 0-2.47L4.93 3.246c-1.365-.682-2.195.1-1.853 1.758l1.005 4.863c.12.584.64 1.107 1.176 1.169l5.94.689c1.312.152 1.312.398 0 .55l-5.94.69c-.53.06-1.057.59-1.176 1.168l-1.005 4.863c-.341 1.653.485 2.441 1.853 1.758l15.045-7.52z\"\n      />\n    </svg>\n  );\n}\n\nexport default ChatSendIcon;\n","import React from \"react\";\n\nimport { IconProps } from \"./models\";\n\nfunction ChatTextIcon(props: IconProps) {\n  return (\n    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n      <path\n        fill=\"#FFF\"\n        fillRule=\"evenodd\"\n        d=\"M10.37 17.875l-.995-3.365h-4.58L3.8 17.875H1L5.526 4h3.208l4.535 13.875h-2.9zM7.052 6.654l-1.671 5.683h3.406L7.117 6.654h-.064zm11.158 9.298c1.22 0 2.196-.808 2.196-1.962v-.778l-2.087.153c-1.102.077-1.69.539-1.69 1.318s.624 1.269 1.581 1.269zM17.353 18c-1.915 0-3.352-1.279-3.352-3.173 0-1.923 1.383-3.01 3.921-3.173l2.485-.164v-.702c0-1.019-.66-1.576-1.744-1.576-.957 0-1.626.538-1.753 1.307h-2.412c.072-2.019 1.79-3.413 4.274-3.413C21.329 7.106 23 8.5 23 10.616v7.259h-2.548V16.24h-.054c-.542 1.106-1.77 1.76-3.045 1.76z\"\n      />\n    </svg>\n  );\n}\n\nexport default ChatTextIcon;\n","import React from \"react\";\n\nimport { IconProps } from \"./models\";\n\nfunction ChatStickersIcon(props: IconProps) {\n  return (\n    <svg\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      {...props}\n    >\n      <path\n        fill=\"none\"\n        fillRule=\"evenodd\"\n        stroke=\"#B2B2B2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"1.4\"\n        d=\"M20.995 12.328c.003-.107.005-.214.005-.323 0-2.488-.88-4.612-2.638-6.371C16.607 3.878 14.487 3 12 3s-4.61.878-6.368 2.634C3.877 7.394 3 9.517 3 12.005c0 2.488.877 4.61 2.632 6.366 1.654 1.655 3.63 2.531 5.928 2.629a7.405 7.405 0 0 1-.247-1.936c0-1.982.7-3.672 2.097-5.07 1.397-1.399 3.087-2.098 5.067-2.098.9 0 1.739.144 2.518.432L11.563 21\"\n      />\n    </svg>\n  );\n}\n\nexport default ChatStickersIcon;\n","import React from \"react\";\n\nimport { IconProps } from \"./models\";\n\nfunction MoneyBagIcon(props: IconProps) {\n  return (\n    <svg\n      id=\"Layer_1\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 497.68 497.68\"\n      xmlSpace=\"preserve\"\n      {...props}\n    >\n      <path\n        fill=\"#F2B233\"\n        d=\"M464.04,404.82c0,97.6-96,92-215.2,92s-215.2,4.8-215.2-92c0-97.6,96-260,215.2-260\n  C368.04,145.62,464.04,308.02,464.04,404.82z\"\n      />\n      <path\n        fill=\"#DD981D\"\n        d=\"M248.84,145.62c119.2,0,215.2,162.4,215.2,260s-96,92-215.2,92\"\n      />\n      <path\n        fill=\"#F2B233\"\n        d=\"M144.04,44.82c0-47.2,47.2-44.8,104.8-44.8s104.8-2.4,104.8,44.8s-47.2,126.4-104.8,126.4\n  S144.04,92.02,144.04,44.82z\"\n      />\n      <path\n        fill=\"#DD981D\"\n        d=\"M248.84,0.02c57.6,0,104.8-2.4,104.8,44.8s-47.2,126.4-104.8,126.4\"\n      />\n      <path\n        fill=\"#04AF76\"\n        d=\"M340.84,154.42c0,8-6.4,14.4-14.4,14.4h-155.2c-8,0-14.4-6.4-14.4-14.4v-4c0-8,6.4-14.4,14.4-14.4\n  h156c8,0,14.4,6.4,14.4,14.4v4H340.84z\"\n      />\n      <path\n        fill=\"#008C61\"\n        d=\"M168.84,136.82h158.4c8,0,14.4,6.4,14.4,14.4v4c0,8-8,14.4-16,14.4\"\n      />\n      <circle fill=\"#04AF76\" cx=\"248.84\" cy=\"339.22\" r=\"96\" />\n      <path\n        fill=\"#008C61\"\n        d=\"M180.84,271.22c37.6-37.6,98.4-37.6,136,0s37.6,98.4,0,136\"\n      />\n      <path\n        fill=\"#FFF6E1\"\n        d=\"M240.84,416.82v-20c-16-0.8-24.8-4-32-8l4.8-21.6c8,4,18.4,8,30.4,8c10.4,0,17.6-4,17.6-11.2\n  s-5.6-11.2-20-16c-20-6.4-32.8-16-32.8-33.6c0-16,7.2-28.8,31.2-32.8v-16.8h16v16c16,0.8,21.6,3.2,27.2,6.4l-4.8,20.8\n  c-4.8-2.4-12.8-6.4-26.4-6.4c-12,0-16,4.8-16,10.4c0,6.4,6.4,9.6,22.4,16c21.6,8,30.4,17.6,30.4,34.4s-8.8,30.4-32.8,34.4v20H240.84\n  z\"\n      />\n      <g>\n        <path\n          fill=\"#FFEEBD\"\n          d=\"M248.84,264.82v36.8c0,0,2.4,0,4,0c13.6,0,21.6,4,26.4,6.4l4.8-20.8c-6.4-3.2-11.2-6.4-27.2-6.4v-16\n  H248.84z\"\n        />\n        <path\n          fill=\"#FFEEBD\"\n          d=\"M259.24,327.22c-4-1.6-8-3.2-10.4-4v27.2c8,4,12.8,8,12.8,13.6c0,6.4-4.8,9.6-12.8,11.2v41.6h8\n  v-20.8c24-4,32.8-17.6,32.8-34.4C289.64,344.82,280.84,335.22,259.24,327.22z\"\n        />\n      </g>\n    </svg>\n  );\n}\n\nexport default MoneyBagIcon;\n","import React from \"react\";\n\nimport { IconProps } from \"./models\";\n\nfunction BankBuildingIcon(props: IconProps) {\n  return (\n    <svg viewBox=\"0 0 64 64\" {...props}>\n      <path d=\"m3 57h58v4h-58z\" fill=\"#7d8d9c\" />\n      <path d=\"m5 53h54v4h-54z\" fill=\"#aabece\" />\n      <path d=\"m21 33h6v16h-6z\" fill=\"#cfdfe8\" />\n      <path d=\"m3 25h58v4h-58z\" fill=\"#aabece\" />\n      <g fill=\"#7d8d9c\">\n        <path d=\"m59 25h-54l27-22z\" />\n        <path d=\"m19 29h10v4h-10z\" />\n        <path d=\"m19 49h10v4h-10z\" />\n      </g>\n      <path d=\"m7 33h6v16h-6z\" fill=\"#cfdfe8\" />\n      <path d=\"m5 29h10v4h-10z\" fill=\"#7d8d9c\" />\n      <path d=\"m5 49h10v4h-10z\" fill=\"#7d8d9c\" />\n      <path d=\"m51 33h6v16h-6z\" fill=\"#cfdfe8\" />\n      <path d=\"m49 29h10v4h-10z\" fill=\"#7d8d9c\" />\n      <path d=\"m49 49h10v4h-10z\" fill=\"#7d8d9c\" />\n      <path d=\"m37 33h6v16h-6z\" fill=\"#cfdfe8\" />\n      <path d=\"m35 29h10v4h-10z\" fill=\"#7d8d9c\" />\n      <path d=\"m35 49h10v4h-10z\" fill=\"#7d8d9c\" />\n      <path\n        d=\"m37 12v-2h-4v-2h-2v2h-3a1 1 0 0 0 -1 1v4a1 1 0 0 0 1 1h3v2h-4v2h4v2h2v-2h3a1 1 0 0 0 1-1v-4a1 1 0 0 0 -1-1h-3v-2zm-2 4v2h-2v-2zm-4-2h-2v-2h2z\"\n        fill=\"#fcf05a\"\n      />\n      <path\n        d=\"m22 22h-6a1 1 0 0 1 -.625-1.781l5-4 1.25 1.562-2.774 2.219h3.149z\"\n        fill=\"#394d5c\"\n      />\n      <path\n        d=\"m47 22h-6v-2h3.149l-2.774-2.219 1.25-1.562 5 4a1 1 0 0 1 -.625 1.781z\"\n        fill=\"#394d5c\"\n      />\n    </svg>\n  );\n}\n\nexport default BankBuildingIcon;\n","export default (...args: any[]) =>\n  args.filter(arg => typeof arg === \"string\").join(\" \");\n","import React from \"react\";\n\nimport bcm from \"../../tools/bcm\";\nimport cn from \"../../tools/classnames\";\n\nimport styles from \"./button.module.scss\";\n\nconst b = bcm(styles);\n\ntype ButtonProps = React.ButtonHTMLAttributes<HTMLButtonElement>;\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(({ className, ...rest }, ref) => (\n  <button ref={ref} className={cn(b(), className)} {...rest} />\n));\n\n// function Button({ className, ...rest }: ButtonProps) {\n//   return <button className={cn(b(), className)} {...rest} />;\n// }\n\nexport default Button;\n","import React from \"react\";\n\nimport Image, { ImageProps } from \"../image\";\n\ninterface MerchantLogoProps extends Omit<ImageProps, \"src\"> {\n  merchantId: string;\n}\n\ninterface AccountLogoProps extends Omit<ImageProps, \"src\"> {\n  logoId: string;\n}\n\ninterface UserLogoProps extends Omit<ImageProps, \"src\"> {\n  userId: string;\n}\n\ninterface StickerLogoProps extends Omit<ImageProps, \"src\"> {\n  stickerId: string;\n}\n\nexport function MerchantLogo({ merchantId, ...rest }: MerchantLogoProps) {\n  return <Image src={`/images/merchants/${merchantId}.png`} {...rest} />;\n}\n\nexport function AccountLogo({ logoId, ...rest }: AccountLogoProps) {\n  return <Image src={`/images/accounts/${logoId}.png`} {...rest} />;\n}\n\nexport function UserLogo({ userId, ...rest }: UserLogoProps) {\n  return <Image src={`/images/users/${userId}.png`} {...rest} />;\n}\n\nexport function StickerLogo({ stickerId, ...rest }: StickerLogoProps) {\n  return <Image src={`/images/stickers/${stickerId}.png`} {...rest} />;\n}\n","import React from \"react\";\nimport ReactPopup from \"reactjs-popup\";\n\n// const popupOverlayStyle = {\n//   zIndex: 1000000\n// };\n\nconst popupContentStyle = {\n  zIndex: 1000001,\n  boxShadow:\n    \"1px 0 3px 0 rgba(151, 158, 178, 0.4), -1px 0 3px 0 rgba(151, 158, 178, 0.4)\",\n  width: \"auto\",\n  padding: 0,\n  border: \"none\",\n  borderRadius: \"5px\"\n};\n\ntype Position = 'top left' | 'top center' | 'top right' |\n  'right top' | 'right center' | 'right bottom' |\n  'bottom left' | 'bottom center' | 'bottom right' |\n  'left top' | 'left center' | 'left bottom' |\n  'center center';\n\ntype PopupProps = {\n  trigger?: JSX.Element | ((isOpen: boolean) => JSX.Element);\n  position: Position;\n  children: JSX.Element | ((close: () => void, isOpen: boolean) => JSX.Element);\n};\n\nfunction Popup({\n  trigger,\n  position,\n  children\n}: PopupProps) {\n  return (\n    <ReactPopup\n      trigger={trigger}\n      position={position}\n      contentStyle={popupContentStyle}\n    >\n      {children}\n    </ReactPopup>\n  );\n}\n\nexport default Popup;\n","import { useState, useEffect } from \"react\";\n\nimport ChatService, { Sticker } from \"../../services/chat-service\";\n\nfunction useStickers() {\n  const [stickers, setStickers] = useState<Sticker[]>([]);\n\n  useEffect(() => {\n    ChatService.createService()\n      .getStickers()\n      .then(setStickers);\n  }, []);\n\n  return { stickers };\n}\n\nexport default useStickers;\n","import React from \"react\";\n\nimport bcm from \"../../../../tools/bcm\";\n\nimport { StickerLogo } from \"../../../../components/logos\";\nimport { ChatStickersIcon } from \"../../../../components/icons\";\nimport Popup from \"../../../../components/popup\";\nimport Button from \"../../../../components/button\";\n\nimport useStickers from \"../../use-stickers\";\n\nimport styles from \"./chat-stickers.module.scss\";\n\nconst b = bcm(styles);\n\ntype ChatStickersProps = {\n  onSelect: (stickerId: string) => void;\n};\n\nfunction ChatStickers({ onSelect }: ChatStickersProps) {\n  const { stickers } = useStickers();\n\n  return (\n    <Popup\n      trigger={\n        <Button>\n          <ChatStickersIcon />\n        </Button>\n      }\n      position=\"top left\"\n    >\n      {close => (\n        <div className={b()}>\n          <div className={b(\"items\")}>\n            {stickers.map(sticker => (\n              <Button\n                key={sticker.id}\n                className={b(\"item\")}\n                onClick={() => {\n                  onSelect(sticker.id);\n                  close();\n                }}\n              >\n                <StickerLogo\n                  width=\"100%\"\n                  stickerId={sticker.id}\n                />\n              </Button>\n            ))}\n          </div>\n        </div>\n      )}\n    </Popup>\n  );\n}\n\nexport default ChatStickers;\n","import React, { useRef, useCallback, useState } from \"react\";\n\nimport bcm from \"../../../../tools/bcm\";\n\nimport { ChatSendIcon } from \"../../../../components/icons\";\nimport Button from \"../../../../components/button\";\n\nimport styles from \"./chat-text-input.module.scss\";\n\nconst b = bcm(styles);\n\nfunction getLinkBreakCount(text: string) {\n  return text.split(\"\\n\").length;\n}\n\nfunction setCursorToEnd(ele: HTMLDivElement){\n  try {\n    const range = document.createRange();\n    const sel = window.getSelection();\n    if (sel) {\n      range.setStart(ele, getLinkBreakCount(ele.innerText));\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n  } catch (e) {\n    // ooops...\n  }\n\n}\n\ntype ChatTextInputProps = {\n  onSend: (text: string) => void;\n};\n\nfunction ChatTextInput({ onSend }: ChatTextInputProps) {\n  const [focused, setFocused] = useState(false);\n  const [text, setText] = useState(\"\");\n  const div = useRef<HTMLDivElement>(null);\n\n  const changeText = useCallback(\n    (text: string) => {\n      setText(text);\n      if (div.current) {\n        div.current.innerText = text;\n\n        if (text) {\n          setCursorToEnd(div.current);\n        }\n      }\n    },\n    [setText]\n  );\n\n  const handleSendText = useCallback(() => {\n    onSend(text);\n    changeText(\"\");\n  }, [text, changeText, onSend]);\n\n  const handleSubmit = useCallback(\n    (e: React.FormEvent) => {\n      e.preventDefault();\n      handleSendText();\n    },\n    [handleSendText]\n  );\n\n  const handleInput = useCallback(() => {\n    if (div.current) {\n      const { innerText } = div.current;\n      setText(innerText);\n    }\n  }, [setText]);\n\n  const handleFocus = useCallback(() => {\n    setFocused(true);\n  }, [setFocused]);\n\n  const handleBlur = useCallback(() => {\n    setFocused(false);\n  }, [setFocused]);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLDivElement>) => {\n      const { keyCode, metaKey } = e;\n\n      if (keyCode !== 13) return;\n\n      e.preventDefault();\n\n      if (metaKey) {\n        changeText(`${text}\\n\\n`);\n      } else {\n        handleSendText();\n      }\n    },\n    [handleSendText, changeText, text]\n  );\n\n  const showPlaceholder = !focused && text.trim().length === 0;\n\n  return (\n    <form onSubmit={handleSubmit} className={b()}>\n      <div className={b(\"wrapper\")}>\n        <div\n          ref={div}\n          contentEditable\n          className={b(\"field\")}\n          onInput={handleInput}\n          onFocus={handleFocus}\n          onBlur={handleBlur}\n          onKeyDown={handleKeyDown}\n        />\n        <div className={b(\"placeholder\", { visible: showPlaceholder })}>\n          Введите сообщение...\n        </div>\n      </div>\n      <Button className={b(\"send-button\")}>\n        <ChatSendIcon />\n      </Button>\n    </form>\n  );\n}\n\nexport default ChatTextInput;\n","import React from \"react\";\n\nimport bcm from \"../../../../tools/bcm\";\n\nimport { ChatTextIcon } from \"../../../../components/icons\";\nimport Button from \"../../../../components/button\";\n\nimport ChatStickers from \"../chat-stickers\";\n\nimport ChatTextInput from \"./chat-text-input\";\n\nimport styles from \"./chat-input.module.scss\";\n\nconst b = bcm(styles);\n\ntype ChatInputProps = {\n  onSendTextMessage: (text: string) => void;\n  onSendStickerMessage: (stickerId: string) => void;\n};\n\nfunction ChatInput({\n  onSendTextMessage,\n  onSendStickerMessage\n}: ChatInputProps) {\n  return (\n    <div className={b()}>\n      <div>\n        <Button className={b(\"action\")}>\n          <ChatTextIcon />\n        </Button>\n        <ChatStickers onSelect={onSendStickerMessage} />\n      </div>\n      <ChatTextInput onSend={onSendTextMessage} />\n    </div>\n  );\n}\n\nexport default ChatInput;\n","import React from \"react\";\n\nimport bcm from \"../../../../tools/bcm\";\n\nimport styles from \"./chat-messages.module.scss\";\n\nconst b = bcm(styles);\n\ntype ChatMessages<T> = {\n  messages: T[];\n  messageRenderer: (message: T) => React.ReactElement;\n};\n\nfunction ChatMessages<T>({ messages, messageRenderer }: ChatMessages<T>) {\n  return <div className={b()}>{messages.map(messageRenderer)}</div>;\n}\n\nexport default ChatMessages;\n","import React from \"react\";\n\nimport bcm from \"../../../../tools/bcm\";\n\nimport styles from \"./chat-text-message.module.scss\";\n\nconst b = bcm(styles);\n\ntype ChatTextMessageProps = {\n  text: string;\n  theme?: \"dark\" | \"light\";\n};\n\nfunction ChatTextMessage({ text, theme = \"light\" }: ChatTextMessageProps) {\n  return <div className={b({ theme })}>{text}</div>;\n}\n\nexport default ChatTextMessage;\n","const moneyMap = {\n  RUB: \"₽\",\n  USD: \"$\"\n};\n\ntype GetMoneyArgs = {\n  sum: number;\n  currency: { name: string };\n  sign?: boolean;\n};\n\nexport default ({ sum, currency, sign = false }: GetMoneyArgs) => {\n  const signStr = sum > 0 ? \"+ \" : \"- \";\n  return `${sign ? signStr : \"\"}${Math.abs(sum)} ${moneyMap[\n    currency.name as keyof typeof moneyMap\n  ] || \"\"}`;\n};\n","import React from \"react\";\n\nimport bcm from \"../../tools/bcm\";\nimport cn from \"../../tools/classnames\";\n\nimport styles from \"./loader.module.scss\";\n\nconst b = bcm(styles);\n\ntype LoaderProps = {\n  size?: \"s\" | \"m\" | \"l\";\n  className?: string;\n  style?: React.CSSProperties;\n};\n\nfunction Loader({ size = \"s\", className, style }: LoaderProps) {\n  return (\n    <div className={cn(b(), className)} style={style}>\n      <div className={b(\"content\", { size })} />\n    </div>\n  );\n}\n\nexport default Loader;\n","import { createSelector } from \"reselect\";\n\nimport { State } from \"./models\";\n\nconst getById = (state: State) => state.operations.byId;\nconst getOperationIdsByAccountId = (state: State) =>\n  state.operations.operationIdsByAccountId;\nconst getLoadedById = (state: State) => state.operations.loadedById;\nconst getLoadedByAccountId = (state: State) =>\n  state.operations.loadedByAccountId;\n\nconst getOperation = (state: State, operationId: string) =>\n  getById(state)[operationId];\n\nconst getOperationLoaded = (state: State, operationId: string) => {\n  const operationLoaded = getLoadedById(state)[operationId];\n  return operationLoaded ? operationLoaded.loaded : false;\n};\n\nconst getOperationError = (state: State, operationId: string) => {\n  const operationLoaded = getLoadedById(state)[operationId];\n  return operationLoaded ? operationLoaded.error : null;\n};\n\nconst getAccountOperationIds = (state: State, accountId: string) =>\n  getOperationIdsByAccountId(state)[accountId] || [];\n\nconst getAccountOperationsLoaded = (state: State, accountId: string) => {\n  const accountOperationsLoaded = getLoadedByAccountId(state)[accountId];\n  return accountOperationsLoaded ? accountOperationsLoaded.loaded : false;\n};\n\nconst getAccountOperationsError = (state: State, accountId: string) => {\n  const accountOperationsLoaded = getLoadedByAccountId(state)[accountId];\n  return accountOperationsLoaded ? accountOperationsLoaded.error : null;\n};\n\nexport const operationSelector = createSelector(\n  getOperation,\n  operation => operation || null\n);\n\nexport const operationLoadedSelector = getOperationLoaded;\nexport const operationErrorSelector = getOperationError;\n\nexport const accountOperationsSelector = createSelector(\n  getAccountOperationIds,\n  getById,\n  (operationIds, byId) => operationIds.map(id => byId[id])\n);\n\nexport const accountOperationsLoadedSelector = getAccountOperationsLoaded;\nexport const accountOperationsErrorSelector = getAccountOperationsError;\n","export const GET_ACCOUNT_OPERATIONS = \"GET_ACCOUNT_OPERATIONS\";\nexport const GOT_ACCOUNT_OPERATIONS = \"GOT_ACCOUNT_OPERATIONS\";\nexport const GOT_ACCOUNT_OPERATIONS_ERROR = \"GOT_ACCOUNT_OPERATIONS_ERROR\";\n\nexport const GET_OPERATION = \"GET_OPERATION\";\nexport const GOT_OPERATION = \"GOT_OPERATION\";\nexport const GOT_OPERATION_ERROR = \"GOT_OPERATION_ERROR\";\n","import { Operation } from \"../../services/operations-service\";\n\nimport {\n  GET_ACCOUNT_OPERATIONS,\n  GOT_ACCOUNT_OPERATIONS,\n  GOT_ACCOUNT_OPERATIONS_ERROR,\n  GET_OPERATION,\n  GOT_OPERATION,\n  GOT_OPERATION_ERROR\n} from \"./constants\";\n\nexport function getAccountOperations(accountId: string) {\n  return { type: GET_ACCOUNT_OPERATIONS, accountId } as const;\n}\n\nexport function gotAccountOperations(\n  accountId: string,\n  operations: Operation[]\n) {\n  return { type: GOT_ACCOUNT_OPERATIONS, accountId, operations } as const;\n}\n\nexport function gotAccountOperationsError(accountId: string, error: string) {\n  return { type: GOT_ACCOUNT_OPERATIONS_ERROR, accountId, error } as const;\n}\n\nexport function getOperation(operationId: string) {\n  return { type: GET_OPERATION, operationId } as const;\n}\n\nexport function gotOperation(operation: Operation) {\n  return { type: GOT_OPERATION, operation } as const;\n}\n\nexport function gotOperationError(operationId: string, error: string) {\n  return { type: GOT_OPERATION_ERROR, operationId, error } as const;\n}\n","import { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport {\n  operationSelector,\n  operationLoadedSelector,\n  operationErrorSelector\n} from \"../modules/operations/selectors\";\nimport { getOperation } from \"../modules/operations/actions\";\nimport { State } from \"../modules/operations/models\";\n\nfunction useOperation(operationId: string) {\n  const dispatch = useDispatch();\n  const operation = useSelector((state: State) =>\n    operationSelector(state, operationId)\n  );\n  const loaded = useSelector((state: State) =>\n    operationLoadedSelector(state, operationId)\n  );\n  const error = useSelector((state: State) =>\n    operationErrorSelector(state, operationId)\n  );\n\n  useEffect(() => {\n    dispatch(getOperation(operationId));\n  }, [operationId, dispatch]);\n\n  return { operation, loaded, error } as const;\n}\n\nexport default useOperation;\n","import format from \"date-fns/format\";\nimport { ru } from \"date-fns/locale\";\n\nexport default (dateString: string, pattern: string = \"d MMMM HH:mm\") =>\n  format(new Date(dateString), pattern, { locale: ru });\n","import React from \"react\";\n\nimport bcm from \"../../tools/bcm\";\n\nimport { Operation } from \"../../services/operations-service\";\n\nimport { UserLogo, MerchantLogo } from \"../logos\";\nimport { MoneyBagIcon, BankBuildingIcon } from \"../icons\";\n\nimport styles from \"./operation-logo.module.scss\";\n\nconst b = bcm(styles);\n\ntype OperationLogoProps = {\n  operation: Operation;\n  size?: number;\n};\n\nfunction OperationLogo({ operation, size = 30 }: OperationLogoProps) {\n  return (\n    <div className={b()} style={{ height: size, width: size }}>\n      {operation.type === \"1\" && (\n        <MerchantLogo merchantId={operation.merchant.id} width=\"100%\" />\n      )}\n      {operation.type === \"2\" && <MoneyBagIcon style={{ width: \"50%\" }} />}\n      {operation.type === \"3\" && <MoneyBagIcon style={{ width: \"50%\" }} />}\n      {operation.type === \"4\" && (\n        <UserLogo userId={operation.user.id} width=\"100%\" />\n      )}\n      {operation.type === \"5\" && <BankBuildingIcon style={{ width: \"50%\" }} />}\n      {operation.type === \"6\" && <BankBuildingIcon style={{ width: \"50%\" }} />}\n    </div>\n  );\n}\n\nexport default OperationLogo;\n","import React from \"react\";\n\nimport bcm from \"../../tools/bcm\";\n\nimport { Operation } from \"../../services/operations-service\";\n\nimport styles from \"./operation-name.module.scss\";\n\nconst b = bcm(styles);\n\ntype OperationNameProps = {\n  operation: Operation;\n};\n\nfunction OperationName({ operation }: OperationNameProps) {\n  return (\n    <div className={b()}>\n      {operation.type === \"1\" && operation.merchant.name}\n      {operation.type === \"2\" && \"Выплата вознаграждения\"}\n      {operation.type === \"3\" && \"Выплата процентов\"}\n      {operation.type === \"4\" && operation.user.name}\n      {operation.type === \"5\" && \"Пополнение\"}\n      {operation.type === \"6\" && \"Плата за обслуживание\"}\n    </div>\n  );\n}\n\nexport default OperationName;\n","import React, { useCallback } from \"react\";\n\nimport bcm from \"../../tools/bcm\";\nimport getMoney from \"../../tools/get-money\";\nimport formatDate from \"../../tools/format-date\";\n\nimport { Operation } from \"../../services/operations-service\";\n\nimport Button from \"../button\";\nimport { ChatIcon } from \"../icons\";\n\nimport OperationLogo from \"./operation-logo\";\nimport OperationName from \"./operation-name\";\n\nimport styles from \"./operation-item.module.scss\";\n\nconst b = bcm(styles);\n\ntype OperationItemProps = {\n  operation: Operation;\n  onMessage?: (operationId: string) => void;\n};\n\nfunction OperationItem({ operation, onMessage }: OperationItemProps) {\n  const handleMessage = useCallback(() => {\n    if (onMessage) {\n      onMessage(operation.id);\n    }\n  }, [operation.id, onMessage]);\n\n  return (\n    <div className={b()}>\n      <div className={b(\"bg\")} />\n      <div className={b(\"wrapper\")}>\n        <div className={b(\"left\")}>\n          <div className={b(\"logo\")}>\n            <OperationLogo operation={operation} />\n          </div>\n          <div>\n            <div className={b(\"name\")}>\n              <OperationName operation={operation} />\n            </div>\n            <div className={b(\"date\")}>{formatDate(operation.createdAt)}</div>\n          </div>\n        </div>\n        <div className={b(\"right\")}>\n          <div className={b(\"sum\")}>\n            {getMoney({\n              sum: operation.sum,\n              currency: operation.currency,\n              sign: true\n            })}\n          </div>\n        </div>\n        <Button className={b(\"message-button\")} onClick={handleMessage}>\n          <ChatIcon />\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default OperationItem;\n","import React from \"react\";\n\nimport bcm from \"../../../../tools/bcm\";\nimport getMoney from \"../../../../tools/get-money\";\n\nimport Loader from \"../../../../components/loader\";\n\nimport useOperation from \"../../../../hooks/use-operation\";\n\nimport {\n  OperationLogo,\n  OperationName\n} from \"../../../../components/operation-item\";\n\nimport styles from \"./chat-operation-message.module.scss\";\n\nconst b = bcm(styles);\n\ntype ChatOperationMessageProps = {\n  operationId: string;\n  theme?: \"dark\" | \"light\";\n};\n\nfunction ChatOperationMessage({ operationId, theme = \"light\" }: ChatOperationMessageProps) {\n  const { operation, loaded, error } = useOperation(operationId);\n\n  if (!loaded) return <Loader />;\n  if (error) return null;\n\n  return (\n    <div className={b({ theme })}>\n      <div className={b(\"logo\")}>\n        <OperationLogo operation={operation} size={60} />\n      </div>\n      <div className={b(\"name\")}>\n        <OperationName operation={operation} />\n      </div>\n      <div className={b(\"sum\")}>\n        {getMoney({ sum: operation.sum, currency: operation.currency })}\n      </div>\n    </div>\n  );\n}\n\nexport default ChatOperationMessage;\n","import React from \"react\";\n\nimport bcm from \"../../../../tools/bcm\";\n\nimport { StickerLogo } from \"../../../../components/logos\";\n\nimport styles from \"./chat-sticker-message.module.scss\";\n\nconst b = bcm(styles);\n\ntype ChatStickerMessageProps = {\n  stickerId: string;\n};\n\nfunction ChatStickerMessage({ stickerId }: ChatStickerMessageProps) {\n  return (\n    <div className={b()}>\n      <StickerLogo stickerId={stickerId} className={b(\"logo\")} />\n    </div>\n  );\n}\n\nexport default ChatStickerMessage;\n","import React from \"react\";\n\nimport bcm from \"../../../../tools/bcm\";\nimport { Message } from \"../../../../services/chat-service\";\n\nimport { UserLogo } from \"../../../../components/logos\";\n\nimport ChatTextMessage from \"../chat-text-message\";\nimport ChatOperationMessage from \"../chat-operation-message\";\nimport ChatStickerMessage from \"../chat-sticker-message\";\n\nimport styles from \"./chat-message.module.scss\";\n\nconst b = bcm(styles);\n\ntype ChatMessageProps = {\n  message: Message;\n};\n\nfunction ChatMessage({ message }: ChatMessageProps) {\n  return (\n    <div className={b({ own: message.own })}>\n      {!message.own && <div className={b(\"name\")}>{message.user.name}</div>}\n      <div className={b(\"wrapper\")}>\n        {!message.own && (\n          <UserLogo userId={message.user.id} className={b(\"logo\")} />\n        )}\n        <div>\n          {message.type === \"1\" && (\n            <ChatTextMessage\n              text={message.text}\n              theme={message.own ? \"dark\" : \"light\"}\n            />\n          )}\n          {message.type === \"2\" && (\n            <ChatOperationMessage\n              operationId={message.operationId}\n              theme={message.own ? \"dark\" : \"light\"}\n            />\n          )}\n          {message.type === \"3\" && (\n            <ChatStickerMessage stickerId={message.stickerId} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ChatMessage;\n","import { createSelector } from \"reselect\";\n\nimport { State } from \"./models\";\n\nconst getIds = (state: State) => state.messages.ids;\nconst getById = (state: State) => state.messages.byId;\nconst getLoaded = (state: State) => state.messages.loaded;\nconst getError = (state: State) => state.messages.error;\n\nexport const messagesSelector = createSelector(\n  getIds,\n  getById,\n  (ids, byId) => ids.map(id => byId[id])\n);\n\nexport const messagesLoadedSelector = getLoaded;\n\nexport const messagesErrorSelector = getError;\n","import { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport {\n  messagesSelector,\n  messagesLoadedSelector,\n  messagesErrorSelector\n} from \"../../modules/messages/selectors\";\nimport {\n  startWatchMessages,\n  stopWatchMessages\n} from \"../../modules/messages/actions\";\n\nfunction useChatMessages() {\n  const dispatch = useDispatch();\n  const messages = useSelector(messagesSelector);\n  const loaded = useSelector(messagesLoadedSelector);\n  const error = useSelector(messagesErrorSelector);\n\n  useEffect(() => {\n    dispatch(startWatchMessages());\n    return () => {\n      dispatch(stopWatchMessages());\n    };\n  }, [dispatch]);\n\n  return { messages, loaded, error } as const;\n}\n\nexport default useChatMessages;\n","import React, { useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\n\nimport {\n  sendTextMessage,\n  sendStickerMessage\n} from \"../../modules/messages/actions\";\n\nimport ChatLayout from \"./components/chat-layout\";\nimport ChatInput from \"./components/chat-input\";\nimport ChatMessages from \"./components/chat-messages\";\nimport ChatMessage from \"./components/chat-message\";\n\nimport useChatMessages from \"./use-chat-messages\";\n\nfunction ChatContainer() {\n  const dispatch = useDispatch();\n  const { messages } = useChatMessages();\n\n  const handleSendTextMessage = useCallback(\n    (text: string) => {\n      dispatch(sendTextMessage(text));\n    },\n    [dispatch]\n  );\n\n  const handleSendStickerMessage = useCallback(\n    (stickerId: string) => {\n      dispatch(sendStickerMessage(stickerId));\n    },\n    [dispatch]\n  );\n\n  return (\n    <ChatLayout\n      messagesCount={messages.length}\n      input={\n        <ChatInput\n          onSendTextMessage={handleSendTextMessage}\n          onSendStickerMessage={handleSendStickerMessage}\n        />\n      }\n      messages={\n        <ChatMessages\n          messages={messages}\n          messageRenderer={message => (\n            <ChatMessage key={message.id} message={message} />\n          )}\n        />\n      }\n    />\n  );\n}\n\nexport default ChatContainer;\n","import React from \"react\";\n\nimport bcm from \"../../tools/bcm\";\n\nimport styles from \"./list.module.scss\";\n\nconst b = bcm(styles);\n\ntype ListProps<T = any> = {\n  data: T[];\n  itemRenderer: ({\n    rowData,\n    rowIndex\n  }: {\n    rowData: T;\n    rowIndex: number;\n  }) => React.ReactElement;\n};\n\nfunction List<T>({ data, itemRenderer }: ListProps<T>) {\n  return (\n    <div className={b()}>\n      {data.map((rowData, rowIndex) => (\n        <div key={rowIndex} className={b(\"item\")}>\n          {itemRenderer({ rowData, rowIndex })}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default List;\n","import React from \"react\";\nimport { Link as RouterLink, LinkProps } from \"react-router-dom\";\n\n// import bcm from \"../../tools/bcm\";\n//\n// import styles from \"./link.module.scss\";\n//\n// const b = bcm(styles);\n\nfunction Link({ to, ...rest }: LinkProps) {\n  return <RouterLink to={to} {...rest} />\n}\n\nexport default Link;\n","import React from \"react\";\n\nimport bcm from \"../../tools/bcm\";\nimport getMoney from \"../../tools/get-money\";\nimport formatDate from \"../../tools/format-date\";\n\nimport Link from \"../link\";\nimport { DisclosureIcon } from \"../icons\";\nimport { AccountLogo } from \"../logos\";\n\nimport styles from \"./deposit-item.module.scss\";\n\nconst b = bcm(styles);\n\ntype AccountItemProps = {\n  id: string;\n  logoId: string;\n  number: string;\n  totalSum: number;\n  currency: { name: string };\n  interestRate: number;\n  openedAt: string;\n  closeAt: string;\n  lastOperation?: {\n    sum: number;\n    createdAt: string;\n    currency: { name: string };\n  };\n};\n\nfunction DepositItem({\n  id,\n  logoId,\n  number,\n  totalSum,\n  currency,\n  interestRate,\n  openedAt,\n  closeAt,\n  lastOperation\n}: AccountItemProps) {\n  return (\n    <div className={b()}>\n      <div className={b(\"header\")}>\n        <div>{`Вклад № ${number}`}</div>\n        <div className={b(\"total-sum\")}>\n          {`${getMoney({ sum: totalSum, currency })}`}\n        </div>\n      </div>\n\n      <div className={b(\"info\")}>{`${interestRate}%  годовых`}</div>\n      <div className={b(\"info\")}>{`Создан: ${formatDate(openedAt)}`}</div>\n      <div className={b(\"info\")}>{`До: ${formatDate(closeAt)}`}</div>\n      {lastOperation && (\n        <div className={b(\"info\")}>\n          <div>Последняя операция:</div>\n          <span>{formatDate(lastOperation.createdAt)} </span>\n          <span>\n            <span>(</span>\n            <span className={b(\"last-sum\")}>{`${getMoney({\n              sum: lastOperation.sum,\n              currency: lastOperation.currency,\n              sign: true\n            })}`}</span>\n            <span>)</span>\n          </span>\n        </div>\n      )}\n\n      <AccountLogo logoId={logoId} className={b(\"logo\")} />\n      {lastOperation && (\n        <Link className={b(\"more-link\")} to={`/deposits/${id}`} title=\"Открыть\">\n          <DisclosureIcon />\n        </Link>\n      )}\n    </div>\n  );\n}\n\nexport default DepositItem;\n","import { createSelector } from \"reselect\";\n\nimport { State } from \"./models\";\n\nconst getIds = (state: State) => state.deposits.ids;\nconst getById = (state: State) => state.deposits.byId;\nconst getLoaded = (state: State) => state.deposits.loaded;\nconst getError = (state: State) => state.deposits.error;\n// const getLoadedById = (state: State) => state.deposits.loadedById;\nconst getDepositById = (state: State, accountId: string) =>\n  state.deposits.byId[accountId];\nconst getDepositLoadedById = (state: State, accountId: string) =>\n  state.deposits.loadedById[accountId];\n\nexport const depositsSelector = createSelector(\n  getIds,\n  getById,\n  (ids, byId) => ids.map(id => byId[id])\n);\n\nexport const depositsLoadedSelector = getLoaded;\n\nexport const depositsErrorSelector = getError;\n\nexport const depositSelector = createSelector(\n  getDepositById,\n  deposit => {\n    return deposit || null;\n  }\n);\n\nexport const depositLoadedSelector = createSelector(\n  getDepositLoadedById,\n  depositLoaded => {\n    return depositLoaded ? depositLoaded.loaded : false;\n  }\n);\n\nexport const depositErrorSelector = createSelector(\n  getDepositLoadedById,\n  depositLoaded => {\n    return depositLoaded ? depositLoaded.error : null;\n  }\n);\n","export const GET_DEPOSITS = \"GET_DEPOSITS\";\nexport const GOT_DEPOSITS = \"GOT_DEPOSITS\";\nexport const GOT_DEPOSITS_ERROR = \"GOT_DEPOSITS_ERROR\";\n\nexport const GET_DEPOSIT = \"GET_DEPOSIT\";\nexport const GOT_DEPOSIT = \"GOT_DEPOSIT\";\nexport const GOT_DEPOSIT_ERROR = \"GOT_DEPOSIT_ERROR\";\n","import { Deposit } from \"../../services/deposits-service\";\n\nimport {\n  GET_DEPOSIT,\n  GET_DEPOSITS,\n  GOT_DEPOSIT_ERROR,\n  GOT_DEPOSIT,\n  GOT_DEPOSITS,\n  GOT_DEPOSITS_ERROR\n} from \"./constants\";\n\nexport function getDeposits() {\n  return { type: GET_DEPOSITS } as const;\n}\n\nexport function gotDeposits(deposits: Deposit[]) {\n  return { type: GOT_DEPOSITS, deposits } as const;\n}\n\nexport function gotDepositsError(error: string) {\n  return { type: GOT_DEPOSITS_ERROR, error } as const;\n}\n\nexport function getDeposit(depositId: string) {\n  return { type: GET_DEPOSIT, depositId } as const;\n}\n\nexport function gotDeposit(deposit: Deposit) {\n  return { type: GOT_DEPOSIT, deposit } as const;\n}\n\nexport function gotDepositError(depositId: string, error: string) {\n  return { type: GOT_DEPOSIT_ERROR, depositId, error } as const;\n}\n","import { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport {\n  depositsSelector,\n  depositsLoadedSelector,\n  depositsErrorSelector\n} from \"../../modules/deposits/selectors\";\nimport { getDeposits } from \"../../modules/deposits/actions\";\n\nfunction useDeposits() {\n  const dispatch = useDispatch();\n  const deposits = useSelector(depositsSelector);\n  const loaded = useSelector(depositsLoadedSelector);\n  const error = useSelector(depositsErrorSelector);\n\n  useEffect(() => {\n    dispatch(getDeposits());\n  }, [dispatch]);\n\n  return { deposits, loaded, error } as const;\n}\n\nexport default useDeposits;\n","import React from \"react\";\n\nimport List from \"../../components/list\";\nimport Loader from \"../../components/loader/loader\";\n\nimport DepositItem from \"../../components/deposit-item\";\nimport useAccounts from \"./use-deposits\";\n\nfunction DepositsContainer() {\n  const { deposits, loaded } = useAccounts();\n\n  if (!loaded) return <Loader style={{ marginTop: 60 }} />;\n  if (deposits.length === 0) return <div>У вас нет открытых вкладов</div>;\n\n  return (\n    <List\n      data={deposits}\n      itemRenderer={({ rowData }) => (\n        <DepositItem\n          id={rowData.id}\n          logoId={rowData.logoId}\n          number={rowData.id}\n          totalSum={rowData.totalSum}\n          openedAt={rowData.openedAt}\n          closeAt={rowData.closeAt}\n          currency={rowData.currency}\n          interestRate={rowData.interestRate}\n          lastOperation={rowData.lastOperation}\n        />\n      )}\n    />\n  );\n}\n\nexport default DepositsContainer;\n","import { useContext } from \"react\";\nimport { __RouterContext } from \"react-router\";\n\nfunction useRouter() {\n  return useContext(__RouterContext);\n}\n\nexport default useRouter;\n","import useRouter from \"./use-router\";\n\nfunction useUrlParams<T>() {\n  const { match } = useRouter();\n  return match.params as T;\n}\n\nexport default useUrlParams;\n","import React from \"react\";\n\nimport bcm from \"../../tools/bcm\";\n\nimport Link from \"../link\";\nimport { CrossIcon } from \"../icons\";\n\nimport styles from \"./account-layout.module.scss\";\n\nconst b = bcm(styles);\n\ntype AccountProps = {\n  info?: React.ReactElement;\n  operations?: React.ReactElement;\n  fallback?: React.ReactElement;\n  returnUrl: string;\n};\n\nfunction AccountLayout({ info, operations, fallback, returnUrl }: AccountProps) {\n  return (\n    <div className={b()}>\n      {fallback && <div className={b(\"fallback\")}>{fallback}</div>}\n      {info && <div className={b(\"info\")}>{info}</div>}\n      {operations && (\n        <div className={b(\"operations-container\")}>\n          <div className={b(\"operations-title\")}>История операций</div>\n          <div className={b(\"operations\")}>{operations}</div>\n        </div>\n      )}\n      <Link className={b(\"close-link\")} to={returnUrl} title=\"Назад\">\n        <CrossIcon />\n      </Link>\n    </div>\n  );\n}\n\nexport default AccountLayout;\n","import { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport {\n  accountOperationsErrorSelector,\n  accountOperationsLoadedSelector,\n  accountOperationsSelector\n} from \"../modules/operations/selectors\";\nimport { getAccountOperations } from \"../modules/operations/actions\";\nimport { State } from \"../modules/operations/models\";\n\nfunction useAccountOperations(accountId: string) {\n  const dispatch = useDispatch();\n  const operations = useSelector((state: State) =>\n    accountOperationsSelector(state, accountId)\n  );\n  const loaded = useSelector((state: State) =>\n    accountOperationsLoadedSelector(state, accountId)\n  );\n  const error = useSelector((state: State) =>\n    accountOperationsErrorSelector(state, accountId)\n  );\n\n  useEffect(() => {\n    dispatch(getAccountOperations(accountId));\n  }, [accountId, dispatch]);\n\n  return { operations, loaded, error } as const;\n}\n\nexport default useAccountOperations;\n","import { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport {\n  depositSelector,\n  depositLoadedSelector,\n  depositErrorSelector\n} from \"../../modules/deposits/selectors\";\nimport { getDeposit } from \"../../modules/deposits/actions\";\nimport { State } from \"../../modules/deposits/models\";\n\nfunction useDeposit(accountId: string) {\n  const dispatch = useDispatch();\n  const deposit = useSelector((state: State) =>\n    depositSelector(state, accountId)\n  );\n  const loaded = useSelector((state: State) =>\n    depositLoadedSelector(state, accountId)\n  );\n  const error = useSelector((state: State) =>\n    depositErrorSelector(state, accountId)\n  );\n\n  useEffect(() => {\n    dispatch(getDeposit(accountId));\n  }, [dispatch, accountId]);\n\n  return { deposit, loaded, error } as const;\n}\n\nexport default useDeposit;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\n\nimport useUrlParams from \"../../hooks/use-url-params\";\n\nimport List from \"../../components/list\";\nimport Loader from \"../../components/loader/loader\";\nimport DepositItem from \"../../components/deposit-item\";\nimport OperationItem from \"../../components/operation-item\";\nimport AccountLayout from \"../../components/account-layout\";\n\nimport useAccountOperations from \"../../hooks/use-account-operations\";\n\nimport { sendOperationMessage } from \"../../modules/messages/actions\";\n\nimport useDeposit from \"./use-deposit\";\n\nfunction DepositContainer() {\n  const dispatch = useDispatch();\n  const { depositId } = useUrlParams<{ depositId: string }>();\n  const { deposit, loaded: loadedAccount } = useDeposit(depositId);\n  const { operations, loaded: loadedOperations } = useAccountOperations(\n    depositId\n  );\n\n  const handleSendOperation = (operationId: string) => {\n    dispatch(sendOperationMessage(operationId));\n  };\n  \n  if (!loadedAccount || !loadedOperations)\n    return <Loader style={{ marginTop: 200 }} />;\n\n  if (!deposit) return (\n    <AccountLayout returnUrl={\"/deposits\"} fallback={<div>Депозит не найден</div>} />\n  );\n\n  return (\n    <AccountLayout\n      returnUrl={\"/deposits\"}\n      info={\n        <DepositItem\n          id={deposit.id}\n          logoId={deposit.logoId}\n          totalSum={deposit.totalSum}\n          number={deposit.id}\n          currency={deposit.currency}\n          interestRate={deposit.interestRate}\n          openedAt={deposit.openedAt}\n          closeAt={deposit.closeAt}\n        />\n      }\n      operations={\n        operations.length !== 0 ? (\n          <List\n            data={operations}\n            itemRenderer={({ rowData }) => (\n              <OperationItem\n                operation={rowData}\n                onMessage={handleSendOperation}\n              />\n            )}\n          />\n        ) : (\n          <div>Нет ни одной операции</div>\n        )\n      }\n    />\n  );\n}\n\nexport default DepositContainer;\n","import React from \"react\";\n\nimport bcm from \"../../tools/bcm\";\nimport getMoney from \"../../tools/get-money\";\nimport formatDate from \"../../tools/format-date\";\n\nimport Link from \"../link\";\nimport { DisclosureIcon } from \"../icons\";\nimport { AccountLogo } from \"../logos\";\n\nimport styles from \"./account-item.module.scss\";\n\nconst b = bcm(styles);\n\ntype AccountItemProps = {\n  id: string;\n  logoId: string;\n  number: string;\n  totalSum: number;\n  currency: { name: string };\n  interestRate: number;\n  openedAt: string;\n  lastOperation?: {\n    sum: number;\n    createdAt: string;\n    currency: { name: string };\n  };\n};\n\nfunction AccountItem({\n  id,\n  logoId,\n  number,\n  totalSum,\n  currency,\n  interestRate,\n  openedAt,\n  lastOperation\n}: AccountItemProps) {\n  return (\n    <div className={b()}>\n      <div className={b(\"header\")}>\n        <div>{`Счет № ${number}`}</div>\n        <div className={b(\"total-sum\")}>\n          {getMoney({ sum: totalSum, currency })}\n        </div>\n      </div>\n\n      <div className={b(\"info\")}>{`${interestRate}%  годовых`}</div>\n      <div className={b(\"info\")}>{`Создан: ${formatDate(openedAt)}`}</div>\n      {lastOperation && (\n        <div className={b(\"info\")}>\n          <div>Последняя операция:</div>\n          <span>{formatDate(lastOperation.createdAt)} </span>\n          <span>\n            <span>(</span>\n            <span className={b(\"last-sum\")}>{`${getMoney({\n              sum: lastOperation.sum,\n              currency: lastOperation.currency,\n              sign: true\n            })}`}</span>\n            <span>)</span>\n          </span>\n        </div>\n      )}\n\n      <AccountLogo logoId={logoId} className={b(\"logo\")} />\n      {lastOperation && (\n        <Link className={b(\"more-link\")} to={`/accounts/${id}`} title=\"Открыть\">\n          <DisclosureIcon />\n        </Link>\n      )}\n    </div>\n  );\n}\n\nexport default AccountItem;\n","import { createSelector } from \"reselect\";\n\nimport { State } from \"./models\";\n\nconst getIds = (state: State) => state.accounts.ids;\nconst getById = (state: State) => state.accounts.byId;\nconst getLoaded = (state: State) => state.accounts.loaded;\nconst getError = (state: State) => state.accounts.error;\n// const getLoadedById = (state: State) => state.accounts.loadedById;\nconst getAccountById = (state: State, accountId: string) =>\n  state.accounts.byId[accountId];\nconst getAccountLoadedById = (state: State, accountId: string) =>\n  state.accounts.loadedById[accountId];\n\nexport const accountsSelector = createSelector(\n  getIds,\n  getById,\n  (ids, byId) => ids.map(id => byId[id])\n);\n\nexport const accountsLoadedSelector = getLoaded;\n\nexport const accountsErrorSelector = getError;\n\nexport const accountSelector = createSelector(getAccountById, account => {\n  return account || null;\n});\n\nexport const accountLoadedSelector = createSelector(getAccountLoadedById, accountLoaded => {\n  return accountLoaded ? accountLoaded.loaded : false;\n});\n\nexport const accountErrorSelector = createSelector(getAccountLoadedById, accountLoaded => {\n  return accountLoaded ? accountLoaded.error : null;\n});\n","export const GET_ACCOUNTS = \"GET_ACCOUNTS\";\nexport const GOT_ACCOUNTS = \"GOT_ACCOUNTS\";\nexport const GOT_ACCOUNTS_ERROR = \"GOT_ACCOUNTS_ERROR\";\n\nexport const GET_ACCOUNT = \"GET_ACCOUNT\";\nexport const GOT_ACCOUNT = \"GOT_ACCOUNT\";\nexport const GOT_ACCOUNT_ERROR = \"GOT_ACCOUNT_ERROR\";\n","import { Account } from \"../../services/accounts-service\";\n\nimport {\n  GET_ACCOUNT,\n  GOT_ACCOUNT,\n  GET_ACCOUNTS,\n  GOT_ACCOUNTS,\n  GOT_ACCOUNTS_ERROR,\n  GOT_ACCOUNT_ERROR\n} from \"./constants\";\n\nexport function getAccounts() {\n  return { type: GET_ACCOUNTS } as const;\n}\n\nexport function gotAccounts(accounts: Account[]) {\n  return { type: GOT_ACCOUNTS, accounts } as const;\n}\n\nexport function gotAccountsError(error: string) {\n  return { type: GOT_ACCOUNTS_ERROR, error } as const;\n}\n\nexport function getAccount(accountId: string) {\n  return { type: GET_ACCOUNT, accountId } as const;\n}\n\nexport function gotAccount(account: Account) {\n  return { type: GOT_ACCOUNT, account } as const;\n}\n\nexport function gotAccountError(accountId: string, error: string) {\n  return { type: GOT_ACCOUNT_ERROR, accountId, error } as const;\n}\n","import { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport {\n  accountSelector,\n  accountErrorSelector,\n  accountLoadedSelector\n} from \"../../modules/accounts/selectors\";\nimport { getAccount } from \"../../modules/accounts/actions\";\nimport { State } from \"../../modules/accounts/models\";\n\nfunction useAccount(accountId: string) {\n  const dispatch = useDispatch();\n  const account = useSelector((state: State) =>\n    accountSelector(state, accountId)\n  );\n  const loaded = useSelector((state: State) =>\n    accountLoadedSelector(state, accountId)\n  );\n  const error = useSelector((state: State) =>\n    accountErrorSelector(state, accountId)\n  );\n\n  useEffect(() => {\n    dispatch(getAccount(accountId));\n  }, [dispatch, accountId]);\n\n  return { account, loaded, error } as const;\n}\n\nexport default useAccount;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\n\nimport useUrlParams from \"../../hooks/use-url-params\";\n\nimport List from \"../../components/list\";\nimport Loader from \"../../components/loader/loader\";\nimport AccountItem from \"../../components/account-item\";\nimport OperationItem from \"../../components/operation-item\";\nimport AccountLayout from \"../../components/account-layout\";\n\nimport { sendOperationMessage } from \"../../modules/messages/actions\";\n\nimport useAccountOperations from \"../../hooks/use-account-operations\";\n\nimport useAccount from \"./use-account\";\n\nfunction AccountContainer() {\n  const dispatch = useDispatch();\n  const { accountId } = useUrlParams<{ accountId: string }>();\n  const { account, loaded: loadedAccount } = useAccount(accountId);\n  const { operations, loaded: loadedOperations } = useAccountOperations(\n    accountId\n  );\n\n  const handleSendOperation = (operationId: string) => {\n    dispatch(sendOperationMessage(operationId));\n  };\n\n  if (!loadedAccount || !loadedOperations)\n    return <Loader style={{ marginTop: 200 }} />;\n\n  if (!account)\n    return (\n      <AccountLayout\n        returnUrl={\"/accounts\"}\n        fallback={<div>Счет не найден</div>}\n      />\n    );\n\n  return (\n    <AccountLayout\n      returnUrl={\"/accounts\"}\n      info={\n        <AccountItem\n          id={account.id}\n          logoId={account.logoId}\n          totalSum={account.totalSum}\n          number={account.id}\n          currency={account.currency}\n          interestRate={account.interestRate}\n          openedAt={account.openedAt}\n        />\n      }\n      operations={\n        operations.length !== 0 ? (\n          <List\n            data={operations}\n            itemRenderer={({ rowData }) => (\n              <OperationItem\n                operation={rowData}\n                onMessage={handleSendOperation}\n              />\n            )}\n          />\n        ) : (\n          <div>Нет ни одной операции</div>\n        )\n      }\n    />\n  );\n}\n\nexport default AccountContainer;\n","import { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport {\n  accountsErrorSelector,\n  accountsLoadedSelector,\n  accountsSelector\n} from \"../../modules/accounts/selectors\";\nimport { getAccounts } from \"../../modules/accounts/actions\";\n\nfunction useAccounts() {\n  const dispatch = useDispatch();\n  const accounts = useSelector(accountsSelector);\n  const loaded = useSelector(accountsLoadedSelector);\n  const error = useSelector(accountsErrorSelector);\n\n  useEffect(() => {\n    dispatch(getAccounts());\n  }, [dispatch]);\n\n  return { accounts, loaded, error } as const;\n}\n\nexport default useAccounts;\n","import React from \"react\";\n\nimport List from \"../../components/list\";\nimport Loader from \"../../components/loader\";\n\nimport AccountItem from \"../../components/account-item\";\nimport useAccounts from \"./use-accounts\";\n\nfunction AccountsContainer() {\n  const { accounts, loaded } = useAccounts();\n\n  if (!loaded) return <Loader style={{ marginTop: 60 }} />;\n  if (accounts.length === 0) return <div>У вас нет открытых счетов</div>;\n\n  return (\n    <List\n      data={accounts}\n      itemRenderer={({ rowData }) => (\n        <AccountItem\n          id={rowData.id}\n          logoId={rowData.logoId}\n          number={rowData.id}\n          totalSum={rowData.totalSum}\n          currency={rowData.currency}\n          interestRate={rowData.interestRate}\n          lastOperation={rowData.lastOperation}\n          openedAt={rowData.openedAt}\n        />\n      )}\n    />\n  );\n}\n\nexport default AccountsContainer;\n","import {\n  GET_ACCOUNT_OPERATIONS,\n  GOT_ACCOUNT_OPERATIONS,\n  GOT_ACCOUNT_OPERATIONS_ERROR,\n  GET_OPERATION,\n  GOT_OPERATION,\n  GOT_OPERATION_ERROR\n} from \"./constants\";\n\nimport { OperationsState as State, OperationsAction as Action } from \"./models\";\n\nconst initialState: State = {\n  byId: {},\n  loadedById: {},\n  operationIdsByAccountId: {},\n  loadedByAccountId: {}\n};\n\nexport default (state: State = initialState, action: Action): State => {\n  switch (action.type) {\n    case GET_ACCOUNT_OPERATIONS: {\n      const { accountId } = action;\n\n      const loadedByAccountId = state.loadedByAccountId[accountId];\n\n      if (!loadedByAccountId) {\n        return {\n          ...state,\n          loadedByAccountId: {\n            ...state.loadedByAccountId,\n            [accountId]: { loaded: false, error: null }\n          }\n        };\n      }\n\n      return state;\n    }\n\n    case GOT_ACCOUNT_OPERATIONS: {\n      const { accountId, operations } = action;\n\n      const operationIds = operations.map(op => op.id);\n      const byId = { ...state.byId };\n      const loadedById = { ...state.loadedById };\n\n      operations.forEach(operation => {\n        // @ts-ignore\n        byId[operation.id] = operation;\n        loadedById[operation.id] = { loaded: true, error: null };\n      });\n\n      const operationIdsByAccountId = {\n        ...state.operationIdsByAccountId,\n        [accountId]: operationIds\n      };\n\n      const loadedByAccountId = {\n        ...state.loadedByAccountId,\n        [accountId]: { loaded: true, error: null }\n      };\n\n      return {\n        ...state,\n        byId,\n        loadedById,\n        operationIdsByAccountId,\n        loadedByAccountId\n      };\n    }\n\n    case GOT_ACCOUNT_OPERATIONS_ERROR: {\n      const { accountId, error } = action;\n\n      const loadedById = {\n        ...state.loadedById,\n        [accountId]: { loaded: true, error }\n      };\n\n      return {\n        ...state,\n        loadedById\n      };\n    }\n\n    case GET_OPERATION: {\n      const { operationId } = action;\n\n      const loadedById = state.loadedById[operationId];\n\n      if (!loadedById) {\n        return {\n          ...state,\n          loadedById: {\n            ...state.loadedById,\n            [operationId]: { loaded: false, error: null }\n          }\n        };\n      }\n\n      return state;\n    }\n\n    case GOT_OPERATION: {\n      const { operation } = action;\n\n      const loadedById = {\n        ...state.loadedById,\n        [operation.id]: { loaded: true, error: null }\n      };\n\n      const byId = {\n        ...state.byId,\n        [operation.id]: operation\n      };\n\n      return {\n        ...state,\n        byId,\n        loadedById\n      };\n    }\n\n    case GOT_OPERATION_ERROR: {\n      const { operationId, error } = action;\n\n      const loadedById = {\n        ...state.loadedById,\n        [operationId]: { loaded: true, error }\n      };\n\n      return {\n        ...state,\n        loadedById\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n  GET_ACCOUNTS,\n  GOT_ACCOUNTS,\n  GOT_ACCOUNTS_ERROR,\n  GET_ACCOUNT,\n  GOT_ACCOUNT,\n  GOT_ACCOUNT_ERROR\n} from \"./constants\";\n\nimport { AccountsState as State, AccountsAction as Action } from \"./models\";\n\nconst initialState: State = {\n  ids: [],\n  byId: {},\n  loadedById: {},\n  loaded: false,\n  error: null\n};\n\nexport default (state: State = initialState, action: Action): State => {\n  switch (action.type) {\n    case GET_ACCOUNTS: {\n      return { ...state, error: null };\n    }\n\n    case GOT_ACCOUNTS: {\n      const { accounts } = action;\n\n      const ids = accounts.map(acc => acc.id);\n      const byId = {};\n      const loadedById = {};\n\n      accounts.forEach(account => {\n        // @ts-ignore\n        byId[account.id] = account;\n        // @ts-ignore\n        loadedById[account.id] = { loaded: true, error: null };\n      });\n\n      return {\n        ...state,\n        ids,\n        byId,\n        loadedById,\n        loaded: true\n      };\n    }\n\n    case GOT_ACCOUNTS_ERROR: {\n      const { error } = action;\n      return { ...state, loaded: true, error };\n    }\n\n    case GET_ACCOUNT: {\n      const { accountId } = action;\n\n      const account = state.byId[accountId];\n\n      if (!account) {\n        return {\n          ...state,\n          loadedById: {\n            ...state.loadedById,\n            [accountId]: { loaded: false, error: null }\n          }\n        };\n      }\n\n      return state;\n    }\n\n    case GOT_ACCOUNT: {\n      const { account } = action;\n\n      const byId = { ...state.byId, [account.id]: account };\n      const loadedById = {\n        ...state.loadedById,\n        [account.id]: { loaded: true, error: null }\n      };\n\n      return {\n        ...state,\n        byId,\n        loadedById\n      };\n    }\n\n    case GOT_ACCOUNT_ERROR: {\n      const { accountId, error } = action;\n\n      const loadedById = {\n        ...state.loadedById,\n        [accountId]: { loaded: true, error }\n      };\n\n      return {\n        ...state,\n        loadedById\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n  GOT_DEPOSITS_ERROR,\n  GOT_DEPOSITS,\n  GOT_DEPOSIT,\n  GET_DEPOSITS,\n  GOT_DEPOSIT_ERROR,\n  GET_DEPOSIT\n} from \"./constants\";\n\nimport { DepositsState as State, DepositsAction as Action } from \"./models\";\n\nconst initialState: State = {\n  ids: [],\n  byId: {},\n  loadedById: {},\n  loaded: false,\n  error: null\n};\n\nexport default (state: State = initialState, action: Action): State => {\n  switch (action.type) {\n    case GET_DEPOSITS: {\n      return { ...state, error: null };\n    }\n\n    case GOT_DEPOSITS: {\n      const { deposits } = action;\n\n      const ids = deposits.map(depos => depos.id);\n      const byId = {};\n      const loadedById = {};\n\n      deposits.forEach(depos => {\n        // @ts-ignore\n        byId[depos.id] = depos;\n        // @ts-ignore\n        loadedById[depos.id] = { loaded: true, error: null };\n      });\n\n      return {\n        ...state,\n        ids,\n        byId,\n        loadedById,\n        loaded: true\n      };\n    }\n\n    case GOT_DEPOSITS_ERROR: {\n      const { error } = action;\n      return { ...state, loaded: true, error };\n    }\n\n    case GET_DEPOSIT: {\n      const { depositId } = action;\n\n      const deposit = state.byId[depositId];\n\n      if (!deposit) {\n        return {\n          ...state,\n          loadedById: {\n            ...state.loadedById,\n            [depositId]: { loaded: false, error: null }\n          }\n        };\n      }\n\n      return state;\n    }\n\n    case GOT_DEPOSIT: {\n      const { deposit } = action;\n\n      const byId = { ...state.byId, [deposit.id]: deposit };\n      const loadedById = {\n        ...state.loadedById,\n        [deposit.id]: { loaded: true, error: null }\n      };\n\n      return {\n        ...state,\n        byId,\n        loadedById\n      };\n    }\n\n    case GOT_DEPOSIT_ERROR: {\n      const { depositId, error } = action;\n\n      const loadedById = {\n        ...state.loadedById,\n        [depositId]: { loaded: true, error }\n      };\n\n      return {\n        ...state,\n        loadedById\n      };\n    }\n\n    default: {\n      return state;\n    }\n  }\n};\n","import { GET_MESSAGES, GOT_MESSAGES, GOT_MESSAGES_ERROR } from \"./constants\";\n\nimport { MessagesState as State, MessagesAction as Action } from \"./models\";\n\nconst initialState: State = {\n  ids: [],\n  byId: {},\n  loaded: false,\n  error: null\n};\n\nexport default (state: State = initialState, action: Action): State => {\n  switch (action.type) {\n    case GET_MESSAGES: {\n      return { ...state, error: null };\n    }\n\n    case GOT_MESSAGES: {\n      const { messages } = action;\n\n      const ids = messages.map(msg => msg.id);\n      const byId = {};\n      messages.forEach(msg => {\n        // @ts-ignore\n        byId[msg.id] = msg;\n      });\n\n      return {\n        ...state,\n        ids,\n        byId,\n        loaded: true\n      };\n    }\n\n    case GOT_MESSAGES_ERROR: {\n      const { error } = action;\n      return { ...state, loaded: true, error };\n    }\n\n    default: {\n      return state;\n    }\n  }\n};\n","import { combineReducers } from \"redux\";\n\nimport operations from \"./operations/reducer\";\nimport { State as OperationsState } from \"./operations/models\";\n\nimport accounts from \"./accounts/reducer\";\nimport { State as AccountsState } from \"./accounts/models\";\n\nimport deposits from \"./deposits/reducer\";\nimport { State as DepositsState } from \"./deposits/models\";\n\nimport messages from \"./messages/reducer\";\nimport { State as MessagesState } from \"./messages/models\";\n\ntype State = OperationsState | AccountsState | DepositsState | MessagesState;\n\nexport default combineReducers<State>({\n  operations,\n  accounts,\n  deposits,\n  messages\n});\n","import { put, takeEvery, all } from \"redux-saga/effects\";\n\nimport OperationsService from \"../../services/operations-service\";\n\nimport * as actions from \"./actions\";\nimport { GET_OPERATION, GET_ACCOUNT_OPERATIONS } from \"./constants\";\n\nfunction* getAccountOperations(action: ReturnType<typeof actions.getAccountOperations>) {\n  const { accountId } = action;\n  const operationsService = OperationsService.createService();\n\n  try {\n    const operations = yield operationsService.getAccountOperations(accountId);\n    yield put(actions.gotAccountOperations(accountId, operations));\n  } catch (e) {\n    yield put(actions.gotAccountOperationsError(accountId, e.message));\n  }\n}\n\nfunction* geOperation(action: ReturnType<typeof actions.getOperation>) {\n  const { operationId } = action;\n  const operationsService = OperationsService.createService();\n\n  try {\n    const operation = yield operationsService.getOperation(operationId);\n    yield put(actions.gotOperation(operation));\n  } catch (e) {\n    yield put(actions.gotOperationError(operationId, e.message));\n  }\n}\n\nexport default function*() {\n  yield all([\n    takeEvery(GET_ACCOUNT_OPERATIONS, getAccountOperations),\n    takeEvery(GET_OPERATION, geOperation)\n  ]);\n}\n","import { put, takeEvery, all } from \"redux-saga/effects\";\n\nimport AccountsService from \"../../services/accounts-service\";\n\nimport * as actions from \"./actions\";\nimport { GET_ACCOUNTS, GET_ACCOUNT } from \"./constants\";\n\nfunction* getAccounts() {\n  const accountsService = AccountsService.createService();\n\n  try {\n    const accounts = yield accountsService.getAccounts();\n    yield put(actions.gotAccounts(accounts));\n  } catch (e) {\n    yield put(actions.gotAccountsError(e.message));\n  }\n}\n\nfunction* getAccount(action: ReturnType<typeof actions.getAccount>) {\n  const { accountId } = action;\n  const accountsService = AccountsService.createService();\n\n  try {\n    const account = yield accountsService.getAccount(accountId);\n    yield put(actions.gotAccount(account));\n  } catch (e) {\n    yield put(actions.gotAccountError(accountId, e.message));\n  }\n}\n\nexport default function*() {\n  yield all([\n    takeEvery(GET_ACCOUNTS, getAccounts),\n    takeEvery(GET_ACCOUNT, getAccount)\n  ]);\n}\n","import { put, takeEvery, all } from \"redux-saga/effects\";\n\nimport DepositsService from \"../../services/deposits-service\";\n\nimport * as actions from \"./actions\";\nimport { GET_DEPOSIT, GET_DEPOSITS } from \"./constants\";\n\nfunction* getDeposits() {\n  const depositsService = DepositsService.createService();\n\n  try {\n    const deposits = yield depositsService.getDeposits();\n    yield put(actions.gotDeposits(deposits));\n  } catch (e) {\n    yield put(actions.gotDepositsError(e.message));\n  }\n}\n\nfunction* getDeposit(action: ReturnType<typeof actions.getDeposit>) {\n  const { depositId } = action;\n  const depositsService = DepositsService.createService();\n\n  try {\n    const deposit = yield depositsService.getDeposit(depositId);\n    yield put(actions.gotDeposit(deposit));\n  } catch (e) {\n    yield put(actions.gotDepositError(depositId, e.message));\n  }\n}\n\nexport default function*() {\n  yield all([\n    takeEvery(GET_DEPOSITS, getDeposits),\n    takeEvery(GET_DEPOSIT, getDeposit)\n  ]);\n}\n","import ApiService from \"../api-service\";\nimport { Message } from \"./models\";\n\nfunction getRandomInt(from: number, to: number) {\n  return from + Math.floor(Math.random() * (to - from));\n}\n\nclass ClientBot {\n  private states: {\n    [key: string]: { desc: string; run(): void };\n  };\n  private currentStateId: string = \"1\";\n  private apiService: ApiService = ApiService.createService();\n  private userId: string = \"1\";\n\n  constructor() {\n    this.states = {\n      \"1\": {\n        desc: \"Приветствие\",\n        run: async () => {\n          await this.sendStickerMessage(\"15\", 3000);\n          this.runState(\"2\");\n        }\n      },\n      \"2\": {\n        desc: \"Попросить помощи\",\n        run: async () => {\n          await this.sendTextMessage(\"Можете помочь?\", 2000);\n          this.runState(\"3\");\n        }\n      },\n      \"3\": {\n        desc: \"Ожидает ответа на просьбу о помощи\",\n        run: async () => {\n          await this.waitMessage();\n          this.runState(\"4\");\n        }\n      },\n      \"4\": {\n        desc: \"Изложить проблему в двух словах\",\n        run: async () => {\n          await this.sendTextMessage(\n            \"Вчера пополнил свой рублевый вклад №2352332\\nно денюжка до сих пор не поступила\",\n            2000\n          );\n          await this.sendTextMessage(\"Можете подтвердить пополнение?\", 2000);\n          this.runState(\"6\");\n        }\n      },\n      \"6\": {\n        desc: \"Ожидание ответа на просьбу\",\n        run: async () => {\n          const message = await this.waitMessage();\n\n          if (message.type !== \"2\") {\n            await this.sendTextMessage(\n              \"Лучше отправить саму операцию в чат\",\n              1000\n            );\n            this.runState(\"6\");\n            return;\n          }\n\n          if (message.operationId !== \"163826\") {\n            await this.sendStickerMessage(\"1\", 500);\n            await this.sendTextMessage(\n              \"Так не пойдет. Отправьте последнюю операцию пополнения\",\n              1000\n            );\n            this.runState(\"6\");\n            return;\n          }\n\n          this.runState(\"7\");\n        }\n      },\n      \"7\": {\n        desc: \"Поблагодарить\",\n        run: async () => {\n          await this.sendTextMessage(\n            \"Да, это оно. Теперь буду спать спокойно)\",\n            1500\n          );\n          await this.sendStickerMessage(\"21\", 500);\n          this.runState(\"8\");\n        }\n      },\n      \"8\": {\n        desc: \"Тут всегда отсылаем рандомный стикер\",\n        run: async () => {\n          await this.waitMessage(false);\n\n          const stickerId = `${getRandomInt(1, 24)}`;\n          await this.sendStickerMessage(stickerId, 500);\n\n          this.runState(\"8\");\n        }\n      }\n    };\n  }\n\n  startDialog() {\n    this.runState(\"1\");\n  }\n\n  startEcho() {\n    this.runState(\"8\");\n  }\n\n  private async sendTextMessage(text: string, timeout: number = 0) {\n    return new Promise(resolve => {\n      setTimeout(() => {\n        this.apiService\n          .sendMessage({\n            text,\n            userId: this.userId\n          })\n          .then(resolve);\n      }, timeout);\n    });\n  }\n\n  private async sendStickerMessage(stickerId: string, timeout: number = 0) {\n    return new Promise(resolve => {\n      setTimeout(() => {\n        this.apiService\n          .sendMessage({\n            stickerId,\n            userId: this.userId\n          })\n          .then(resolve);\n      }, timeout);\n    });\n  }\n\n  private async waitMessage(spam: boolean = true): Promise<Message> {\n    return new Promise(resolve => {\n      let timerId: NodeJS.Timeout;\n\n      const unsubscribe = this.apiService.subscribeToMessages<Message>(\n        message => {\n          clearInterval(timerId);\n          unsubscribe();\n          resolve(message);\n        },\n        this.userId\n      );\n\n      if (spam) {\n        timerId = setInterval(() => {\n          const stickerId = `${getRandomInt(22, 24)}`;\n          this.sendStickerMessage(stickerId);\n        }, 10000);\n      }\n    });\n  }\n\n  private runState(stateId: string) {\n    this.changeCurrentState(stateId);\n    this.runCurrentState();\n  }\n\n  private runCurrentState() {\n    this.states[this.currentStateId].run();\n  }\n\n  private changeCurrentState(stateId: string) {\n    this.currentStateId = stateId;\n  }\n}\n\nexport default ClientBot;\n","import {\n  put,\n  takeEvery,\n  all,\n  fork,\n  take,\n  delay,\n  select\n} from \"redux-saga/effects\";\n\nimport ChatService from \"../../services/chat-service\";\nimport ClientBot from \"../../services/chat-service/client-bot\";\n\nimport * as actions from \"./actions\";\nimport {\n  SEND_TEXT_MESSAGE,\n  SEND_OPERATION_MESSAGE,\n  SEND_STICKER_MESSAGE,\n  GET_MESSAGES,\n  START_WATCH_MESSAGES,\n  STOP_WATCH_MESSAGES\n} from \"./constants\";\n\nimport { messagesSelector } from \"./selectors\";\n\nfunction* getMessages() {\n  const messagesService = ChatService.createService();\n\n  try {\n    const messages = yield messagesService.getMessages();\n    yield put(actions.gotMessages(messages));\n  } catch (e) {\n    yield put(actions.gotMessagesError(e.message));\n  }\n}\n\nfunction* messagesWatcher() {\n  while (true) {\n    yield put(actions.getMessages());\n    yield delay(5000);\n  }\n}\n\nfunction* startWatchMessages() {\n  const watcher = yield fork(messagesWatcher);\n  yield take(STOP_WATCH_MESSAGES);\n  watcher.cancel();\n}\n\nfunction* sendTextMessage(action: ReturnType<typeof actions.sendTextMessage>) {\n  const { text } = action;\n\n  if (text.trim().length === 0) return;\n\n  const messagesService = ChatService.createService();\n\n  try {\n    yield messagesService.sendTextMessage(text);\n    yield getMessages();\n  } catch (e) {\n    // ooops...\n  }\n}\n\nfunction* sendOperationMessage(\n  action: ReturnType<typeof actions.sendOperationMessage>\n) {\n  const { operationId } = action;\n  const messagesService = ChatService.createService();\n\n  try {\n    yield messagesService.sendOperationMessage(operationId);\n    yield getMessages();\n  } catch (e) {\n    // ooops...\n  }\n}\n\nfunction* sendStickerMessage(\n  action: ReturnType<typeof actions.sendStickerMessage>\n) {\n  const { stickerId } = action;\n  const messagesService = ChatService.createService();\n\n  try {\n    yield messagesService.sendStickerMessage(stickerId);\n    yield getMessages();\n  } catch (e) {\n    // ooops...\n  }\n}\n\nfunction* rehydrateMessages() {\n  try {\n    const messages = yield select(messagesSelector);\n    const messagesService = ChatService.createService();\n    yield messagesService.syncMessages(messages);\n    const clientBot = new ClientBot();\n\n    if (messages.length === 0) {\n      clientBot.startDialog();\n    } else {\n      clientBot.startEcho();\n    }\n  } catch (e) {\n    // ooops...\n  }\n}\n\nexport default function*() {\n  yield all([\n    takeEvery(GET_MESSAGES, getMessages),\n    takeEvery(START_WATCH_MESSAGES, startWatchMessages),\n    takeEvery(SEND_TEXT_MESSAGE, sendTextMessage),\n    takeEvery(SEND_OPERATION_MESSAGE, sendOperationMessage),\n    takeEvery(SEND_STICKER_MESSAGE, sendStickerMessage),\n    takeEvery(\"persist/REHYDRATE\", rehydrateMessages)\n  ]);\n}\n","import { all, call } from \"redux-saga/effects\";\n\nimport operationsSaga from \"./operations/sagas\";\nimport accountsSaga from \"./accounts/sagas\";\nimport depositsSaga from \"./deposits/sagas\";\nimport messagesSaga from \"./messages/sagas\";\n\nexport default function*() {\n  yield all([\n    call(accountsSaga),\n    call(depositsSaga),\n    call(messagesSaga),\n    call(operationsSaga)\n  ]);\n}\n","import { createStore, applyMiddleware } from \"redux\";\nimport createSagaMiddleware from \"redux-saga\";\nimport { persistStore, persistReducer } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\n\nimport rootReducer from \"./root-reducer\";\nimport rootSaga from \"./root-saga\";\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n  whitelist: [\"messages\"]\n};\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\n\nexport default () => {\n  const sagaMiddleware = createSagaMiddleware();\n\n  const store = createStore(persistedReducer, applyMiddleware(sagaMiddleware));\n  const persistor = persistStore(store);\n  sagaMiddleware.run(rootSaga);\n\n  return { store, persistor };\n};\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport { PersistGate } from 'redux-persist/integration/react'\n\nimport bcm from \"./tools/bcm\";\n\nimport Tabs from \"./components/tabs\";\n\nimport Chat from \"./blocks/chat\";\nimport Deposits from \"./blocks/deposits\";\nimport Deposit from \"./blocks/deposit\";\nimport Account from \"./blocks/account\";\nimport Accounts from \"./blocks/accounts\";\n\nimport { configureStore } from \"./modules\";\n\nimport styles from \"./app.module.scss\";\n\nconst b = bcm(styles);\nconst { store, persistor } = configureStore();\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <Router>\n          <div className={b()}>\n            <div className={b(\"chat\")}>\n              <Chat />\n            </div>\n            <div className={b(\"sidebar\")}>\n              <Switch>\n                <Route path=\"/deposits/:depositId\" component={Deposit} />\n                <Route path=\"/accounts/:accountId\" component={Account} />\n\n                <Tabs\n                  initialPath=\"/accounts\"\n                  tabs={[\n                    { title: \"Счета\", path: \"/accounts\", component: Accounts },\n                    { title: \"Вклады\", path: \"/deposits\", component: Deposits }\n                  ]}\n                />\n              </Switch>\n            </div>\n          </div>\n        </Router>\n      </PersistGate>\n    </Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./index.scss\";\nimport App from \"./app\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}